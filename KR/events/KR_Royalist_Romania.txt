###########################
# Royalist Romania Events
###########################
# By wyandotte
###########################

add_namespace = royalist

# Germany: Monarchists won civil war, demand oil shipments
country_event = {
	id = royalist.64
	title = royalist.64.t
	desc = royalist.64.d

	trigger = {
		tag = GER

		is_subject = no
		is_faction_leader = yes

		NOT = { has_global_flag = romania_stopped_oil_shipments}

		has_idea = GER_rom_oil_shipments

		RRM = {
			exists = yes
			NOT = { has_war_with = ROM }
			owns_state = 46 # must have control of Ploiesti
		}

		NOT = { country_exists = ROM }

		has_global_flag = romanian_civil_war
	}

	fire_only_once = yes

	mean_time_to_happen = {
		days = 7
	}

	option = {
		name = royalist.64.a # Remind them

		RRM = { country_event = { id = royalist.65 days = 2 } }
	}
}

# Royalist Romania: Germany demands their oil shipments
country_event = {
	id = royalist.65
	title = royalist.65.t
	desc = royalist.65.d

	is_triggered_only = yes

	option = {
		name = royalist.65.a # We keep sending the oil

		ai_chance = { factor = 50 }

		add_political_power = -50

		add_ideas = RRM_oil_shipments

		GER = {
			add_opinion_modifier = { target = RRM modifier = ROM_continued_oil_shipments }

			country_event = { id = royalist.66 days = 1 }
		}
	}

	option = {
		name = royalist.65.b # Refuse outright

		ai_chance = {
			factor = 50

			modifier = {
				factor = 1.5

				GER = { has_war_with = FRA }
			}
		}

		add_political_power = 50

		GER = {
			add_opinion_modifier = { target = RRM modifier = ROM_stopped_oil_shipments }

			country_event = { id = royalist.67 days = 1 }
		}
	}
}

# Germany: Royalist Romania continues their oil shipments
country_event = {
	id = royalist.66
	title = royalist.66.t
	desc = royalist.66.d

	is_triggered_only = yes

	option = {
		name = royalist.66.a # We knew it

		add_political_power = 20

		effect_tooltip = {
			add_opinion_modifier = { target = RRM modifier = ROM_continued_oil_shipments }
		}
	}
}

# Germany: Royalist Romania stopped their oil shipments
country_event = {
	id = royalist.67
	title = royalist.67.t
	desc = royalist.67.d

	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			remove_ideas = GER_rom_oil_shipments
			add_timed_idea = {
				idea = GER_oil_shortage
				days = 365
			}
		}
	}

	option = {
		name = royalist.67.a # We will not forget this

		ai_chance = { factor = 100 }

		add_political_power = -20

		effect_tooltip = {
			remove_ideas = GER_rom_oil_shipments
			add_timed_idea = {
				idea = GER_oil_shortage
				days = 365
			}

			add_opinion_modifier = { target = RRM modifier = ROM_stopped_oil_shipments }
		}
	}

	option = {
		name = royalist.67.b # War will solve this

		ai_chance = { factor = 0 }

		add_political_power = -20

		declare_war_on = { target = RRM type = annex_everything }
	}
}

# Royalist Romania: the general election
country_event = {
	id = royalist.68
	title = royalist.68.t
	desc = royalist.68.d

	is_triggered_only = yes

	option = {
		name = royalist.68.a # Continue

		ai_chance = { factor = 75 }

		hidden_effect = { country_event = { id = royalist.69 days = 90 } }
	}

	option = {
		name = royalist.68.b # Make the military government permanent

		ai_chance = { factor = 25 }

		set_politics = { ruling_party = authoritarian_democrat elections_allowed = no }
		add_popularity = { ideology = authoritarian_democrat popularity = 0.4 }

		remove_ideas_with_trait = head_of_government
		add_ideas = RRM_Miron_Cristea_hog_ade

		remove_ideas_with_trait = foreign_minister
		add_ideas = RRM_Gheorghe_Tatarescu_for_ade

	}
}

# Royalist Romania: first free elections
country_event = {
	id = royalist.69
	title = royalist.69.t
	desc = royalist.69.d

	is_triggered_only = yes

	option = {
		name = royalist.69.a # National Peasants Party

		ai_chance = { factor = 40 }

		set_politics = { ruling_party = social_conservative elections_allowed = no }
		add_popularity = { ideology = social_conservative popularity = 0.05 } # just a small increase as they should be the ruling party already

		remove_ideas_with_trait = head_of_government
		add_ideas = RRM_Gheorghe_Tatarescu_hog_sco # same as before

		remove_ideas_with_trait = foreign_minister
		add_ideas = RRM_Nicolae_Titulescu_for_sco # same as before

		remove_ideas_with_trait = economy_minister
		add_ideas = RRM_Constantin_Bratianu_eco_sco # same as before

		remove_ideas_with_trait = security_minister
		add_ideas = RRM_Istrate_Micescu_sec_sco # same as before
	}

	option = {
		name = royalist.69.b # Social Democratic Party

		ai_chance = { factor = 40 }

		set_politics = { ruling_party = social_democrat elections_allowed = no }
		add_popularity = { ideology = social_democrat popularity = 0.4 }

		remove_ideas_with_trait = head_of_government
		add_ideas = RRM_Iuliu_Maniu_hog_sde

		remove_ideas_with_trait = foreign_minister
		add_ideas = RRM_Iuliu_Hossu_for_sde

		remove_ideas_with_trait = economy_minister
		add_ideas = RRM_Constantin_Bratianu_eco_sco # same as before

		remove_ideas_with_trait = security_minister
		add_ideas = RRM_Istrate_Micescu_sec_sco # same as before
	}

	option = {
		name = royalist.69.c # National Liberal Party

		ai_chance = { factor = 20 }

		set_politics = { ruling_party = social_liberal elections_allowed = no }
		add_popularity = { ideology = social_liberal popularity = 0.4 }

		remove_ideas_with_trait = head_of_government
		add_ideas = RRM_Octavian_Goga_hog_sli

		remove_ideas_with_trait = foreign_minister
		add_ideas = RRM_Istrate_Micescu_for_sli

		remove_ideas_with_trait = economy_minister
		add_ideas = RRM_Virgil_Madgearu_eco_sli

		remove_ideas_with_trait = security_minister
		add_ideas = RRM_Armand_Calinescu_sec_sli
	}

	option = {
		name = royalist.69.e # The army puts an end to this democracy

		ai_chance = { factor = 0 }

		set_politics = { ruling_party = authoritarian_democrat elections_allowed = no }
		add_popularity = { ideology = authoritarian_democrat popularity = 0.4 }

		remove_ideas_with_trait = head_of_government
		add_ideas = RRM_Miron_Cristea_hog_ade

		remove_ideas_with_trait = foreign_minister
		add_ideas = RRM_Gheorghe_Tatarescu_for_ade

		remove_ideas_with_trait = economy_minister
		add_ideas = RRM_Constantin_Bratianu_eco_sco # same as before

		remove_ideas_with_trait = security_minister
		add_ideas = RRM_Istrate_Micescu_sec_sco # same as before
	}
}

# Germany: Romania stops shipping oil
country_event = {
	id = royalist.70
	title = royalist.70.t
	desc = royalist.70.d

	fire_only_once = yes
	
	trigger = {
		tag = GER
		has_idea = GER_rom_oil_shipments
		RRM = {
			has_country_flag = RRM_has_won
		}
		NOT = { 
			RRM = { is_subject_of = GER }
		}
		NOT = { owns_state = 81 }
		OR = {
			NOT = { country_exists = RRM }
			has_war_with = RRM
		}
	}
		
	option = {
		name = royalist.70.a # Verdammt
		add_political_power = -25
		remove_ideas = GER_rom_oil_shipments
		add_timed_idea = {
			idea = GER_oil_shortage
			days = 365
		}
		clr_global_flag = GER_has_oil
	}
}
