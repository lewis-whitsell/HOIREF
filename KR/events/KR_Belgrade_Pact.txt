###########################
# Belgrade Pact Events
###########################
# By wyandotte
###########################

add_namespace = pact

###########################
# Formation of the Pact
###########################

### The Belgrade pact
country_event = {
	id = pact.1
	title = pact.1.t
	desc = pact.1.d
	picture = GFX_report_event_soviet_finnish_pact

	is_triggered_only = yes

	option = {
		name = pact.1.a  # Open the Congress

		ai_chance = { factor = 90 }

		every_country = {
			limit = { can_join_the_belgrade_pact = yes }
			country_event = { id = pact.2 }
		}

		set_country_flag = founded_belgradepact
		
		hidden_effect = { news_event = { id = worldnews.18 days = 1 } }

		create_faction = Belgrade_Pact

		hidden_effect = { add_opinion_modifier = { target = BUL modifier = Belgrade_Pact_anti_bulgaria } }
	}

	option = {
		name = pact.1.b # Close the Congress

		ai_chance = { factor = 10 }

		add_political_power = -100

		hidden_effect = {
			reverse_add_opinion_modifier = { target = BUL modifier = Belgrade_Pact_closed_congress }
			reverse_add_opinion_modifier = { target = GER modifier = Belgrade_Pact_closed_congress }
			reverse_add_opinion_modifier = { target = AUS modifier = Belgrade_Pact_closed_congress }
			reverse_add_opinion_modifier = { target = HUN modifier = Belgrade_Pact_closed_congress }
			reverse_add_opinion_modifier = { target = ILL modifier = Belgrade_Pact_closed_congress }
			reverse_add_opinion_modifier = { target = OTT modifier = Belgrade_Pact_closed_congress }
			reverse_add_opinion_modifier = { target = ALB modifier = Belgrade_Pact_closed_congress }
		}
	}

}

### Invitation to the Belgrade Pact
country_event = {
	id = pact.2
	title = pact.2.t
	desc = pact.2.d
	picture = GFX_report_event_soviet_finnish_pact

	is_triggered_only = yes

	option = {
		name = pact.2.a # Join the Belgrade Pact

		ai_chance = {
			factor = 90

			modifier = {
				factor = 0
				OR = {
					has_war = yes
					is_in_faction = yes
					is_subject = yes
				}
			}
		}

		set_country_flag = joined_belgradepact

		SER = {
			add_to_faction = ROOT

			add_opinion_modifier = { target = ROOT modifier = Belgrade_Pact_joined_yay }

			hidden_effect = { country_event = { id = pact.3 } } # Notify Serbia of joining
		}

		hidden_effect = {
			add_opinion_modifier = { target = BUL modifier = Belgrade_Pact_anti_bulgaria }

			reverse_add_opinion_modifier = { target = GER modifier = Belgrade_Pact_joined_boo }
			reverse_add_opinion_modifier = { target = AUS modifier = Belgrade_Pact_joined_boo }
			reverse_add_opinion_modifier = { target = HUN modifier = Belgrade_Pact_joined_boo }
			reverse_add_opinion_modifier = { target = CRO modifier = Belgrade_Pact_joined_boo }
			reverse_add_opinion_modifier = { target = OTT modifier = Belgrade_Pact_joined_boo }
			reverse_add_opinion_modifier = { target = ALB modifier = Belgrade_Pact_joined_boo }
		}
	}

	option = {
		name = pact.2.b # We have no interest

		ai_chance = { factor = 10 }

		add_political_power = -100

		set_country_flag = refused_belgrade_pact

		SER = {
			country_event = { id = pact.4 hours = 2 } # Notify Serbia of the refusal
			add_opinion_modifier = { target = ROOT modifier = Belgrade_Pact_refused }
		}

		if = {
			limit = {
				tag = GRE
				can_invite_ottomans_to_belgrade_pact = yes
			}
			hidden_effect = { SER = { country_event = { id = pact.5 days = 1 } } } # Greece has refused, invite Ottomans?
		}

		hidden_effect = {
			reverse_add_opinion_modifier = { target = BUL modifier = Belgrade_Pact_did_not_join_yay }
			reverse_add_opinion_modifier = { target = GER modifier = Belgrade_Pact_did_not_join_yay }
			reverse_add_opinion_modifier = { target = AUS modifier = Belgrade_Pact_did_not_join_yay }
			reverse_add_opinion_modifier = { target = HUN modifier = Belgrade_Pact_did_not_join_yay }
			reverse_add_opinion_modifier = { target = CRO modifier = Belgrade_Pact_did_not_join_yay }
			reverse_add_opinion_modifier = { target = OTT modifier = Belgrade_Pact_did_not_join_yay }
			reverse_add_opinion_modifier = { target = ALB modifier = Belgrade_Pact_did_not_join_yay }
		}
	}
}

### A country joins the pact
country_event = {
	id = pact.3
	title = pact.3.t
	desc = pact.3.d
	picture = GFX_report_event_soviet_finnish_pact

	is_triggered_only = yes

	option = {
		name = pact.3.a # Welcome

		effect_tooltip = { add_to_faction = FROM }
	}
}

### A country refuses to join the pact
country_event = {
	id = pact.4
	title = pact.4.t
	desc = pact.4.d
	picture = GFX_report_event_soviet_finnish_pact

	is_triggered_only = yes

	option = {
		name = pact.4.a # We don't need them
	}
}

### Greece refused the pact, invite the Ottomans?
country_event = {
	id = pact.5
	title = pact.5.t
	desc = pact.5.d
	picture = GFX_report_event_soviet_finnish_pact

	is_triggered_only = yes

	option = {
		name = pact.5.a # Invite the Ottomans

		ai_chance = {
			factor = 60

			modifier = {
				factor = 1.5

				# Romania also hasn't joined
				OR = {
					NOT = { country_exists = RRM is_in_faction_with = ROM }
					NOT = { country_exists = ROM is_in_faction_with = RRM }
				}
			}
		}

		OTT = { country_event = { id = pact.6 hours = 6 } }
	}

	option = {
		name = pact.5.b # We're fine without them

		ai_chance = { factor = 40 }
	}
}

### Ottomans: Serbia invites us to the Belgrade Pact
country_event = {
	id = pact.6
	title = pact.6.t
	desc = pact.6.d
	picture = GFX_report_event_soviet_finnish_pact

	is_triggered_only = yes

	immediate = {
		set_country_flag = invited_to_belgrade_pact
	}

	option = {
		name = pact.6.a # Agree

		ai_chance = {
			factor = 50

			modifier = {
				factor = 0
				has_war = yes
			}
		}

		set_country_flag = joined_belgradepact

		SER = {
			add_to_faction = ROOT

			add_opinion_modifier = { target = ROOT modifier = Belgrade_Pact_joined_yay }

			hidden_effect = { country_event = { id = pact.3 hours = 6 } } # Notify Serbia of joining
		}
	}

	option = {
		name = pact.6.b # Support Bulgaria

		ai_chance = {
			factor = 40

			modifier = {
				factor = 0
				has_war = yes
			}
		}

		set_country_flag = supported_bulgaria

		SER = { country_event = { id = pact.7 } } # Notify Serbia of this
	}

	option = {
		name = pact.6.c # We shouldn't focus on the Balkans

		ai_chance = { factor = 10 }

		add_political_power = -100

		SER = {
			country_event = { id = pact.4 hours = 2 } # Notify Serbia of the refusal
			add_opinion_modifier = { target = ROOT modifier = Belgrade_Pact_refused }
		}

		hidden_effect = {
			reverse_add_opinion_modifier = { target = BUL modifier = Belgrade_Pact_did_not_join_yay }
			reverse_add_opinion_modifier = { target = GER modifier = Belgrade_Pact_did_not_join_yay }
			reverse_add_opinion_modifier = { target = AUS modifier = Belgrade_Pact_did_not_join_yay }
			reverse_add_opinion_modifier = { target = HUN modifier = Belgrade_Pact_did_not_join_yay }
			reverse_add_opinion_modifier = { target = CRO modifier = Belgrade_Pact_did_not_join_yay }
			reverse_add_opinion_modifier = { target = ALB modifier = Belgrade_Pact_did_not_join_yay }
		}
	}
}

### The Ottomans supported Bulgaria
country_event = {
	id = pact.7
	title = pact.7.t
	desc = pact.7.d
	picture = GFX_report_event_soviet_finnish_pact

	is_triggered_only = yes

	option = {
		name = pact.7.a # Horrible
	}
}

### Bulgaria: The Belgrade Pact
country_event = {
	id = pact.8
	title = pact.8.t
	desc = pact.8.d

	trigger = {
		tag = BUL

		SER = { has_country_flag = founded_belgradepact }
	}

	mean_time_to_happen = {
		days = 3
	}

	fire_only_once = yes

	option = {
		name = pact.8.a # Not good

		every_country = {
			limit = {
				OR = {
					has_country_flag = joined_belgradepact
					has_country_flag = founded_belgradepact
				}
			}
			reverse_add_opinion_modifier = { target = BUL modifier = Belgrade_Pact_joined_against_us }
		}
	}
}

###########################
# Support for Bulgaria
###########################

### Germany/Austria/Hungary/Ottomans: The Belgrade Pact
country_event = {
	id = pact.9
	title = pact.9.t
	desc = pact.9.d

	trigger = {
		has_war = no
		is_subject = no

		SER = { has_country_flag = founded_belgradepact }

		NOT = { has_country_flag = reaction_to_belgrade_pact }

		OR = {
			tag = GER
			tag = AUS
			tag = HUN

			# Ottomans only if they weren't invited earlier
			AND = {
				tag = OTT
				NOT = { has_country_flag = invited_to_belgrade_pact }
			}
		}
	}

	mean_time_to_happen = {
		days = 14
	}

	immediate = {
		set_country_flag = reaction_to_belgrade_pact
	}

	option = {
		name = pact.9.a # Support Bulgaria

		ai_chance = {
			factor = 60

			modifier = {
				factor = 0

				OR = {
					tag = AUS
					tag = HUN
				}
			}
		}

		set_country_flag = supported_bulgaria

		SER = { country_event = { id = pact.10 days = 1 } } # Serbia: They support Bulgaria!
		BUL = { country_event = { id = pact.11 days = 1 } } # Bulgaria: They support us!

		hidden_effect = {
			SER = { add_opinion_modifier = { target = ROOT modifier = Belgrade_Pact_supported_enemy } }
			BUL = { add_opinion_modifier = { target = ROOT modifier = Belgrade_Pact_supported_us } }
		}
	}
	option = {
		name = pact.9.b # Avoid the Balkans

		ai_chance = { factor = 40 }

		add_political_power = -50
	}
}

### Serbia: <country> supports Bulgaria!
country_event = {
	id = pact.10
	title = pact.10.t
	desc = pact.10.d

	is_triggered_only = yes

	option = {
		name = pact.10.a # This is not good
	}
}

### Bulgaria: <country> supports us
country_event = {
	id = pact.11
	title = pact.11.t
	desc = pact.11.d

	is_triggered_only = yes

	option = {
		name = pact.11.a # Good
	}
}

###########################
# Royalist Romania joins after the civil war
###########################

### Royalist Romania has won the civil war, ask to join Belgrade Pact
country_event = {
	id = pact.12
	title = pact.12.t
	desc = pact.12.d

	trigger = {
		tag = RRM
		NOT = { country_exists = ROM }
		is_subject = no

		NOT = { has_country_flag = refused_belgrade_pact }

		SER = {
			is_faction_leader = yes
			has_war = no
		}

		# Bulgaria is a valid target
		BUL = { is_subject = no }
	}

	mean_time_to_happen = {
		days = 7
	}

	fire_only_once = yes

	option = {
		name = pact.12.a # Ally with Serbia

		ai_chance = { factor = 90 }

		if = {
			limit = { is_in_faction = yes }
			every_country = {
				limit = {
					is_faction_leader = yes
					is_in_faction_with = RRM
				}
				remove_from_faction = RRM
			}
		}

		SER = { country_event = { id = pact.13 hours = 6 } }

		add_political_power = 20
	}
	option = {
		name = pact.12.b # Isolationism will protect Romania

		ai_chance = { factor = 10 }

		add_political_power = -20
	}
}

### Serbia: Romania wants to join Belgrade Pact
country_event = {
	id = pact.13
	title = pact.13.t
	desc = pact.13.d

	is_triggered_only = yes

	option = {
		name = pact.13.a # Of course

		ai_chance = { factor = 95 }

		add_to_faction = FROM
		hidden_effect = { add_opinion_modifier = { target = FROM modifier = Belgrade_Pact_joined_yay } }
		add_political_power = 50

		FROM = { country_event = { id = pact.14 hours = 4 } }
	}
	option = {
		name = pact.13.b # Rather not.

		ai_chance = { factor = 5 }

		add_political_power = -20

		FROM = { country_event = { id = pact.15 hours = 4 } }
	}
}

### Romania: We join the Belgrade Pact
country_event = {
	id = pact.14
	title = pact.14.t
	desc = pact.14.d

	is_triggered_only = yes

	option = {
		name = pact.14.a # Now our independece is secured

		effect_tooltip = { SER = { add_to_faction = ROOT } }
		add_political_power = 50

		set_country_flag = joined_belgradepact
	}
}

### Romania: We can't join the Belgrade Pact
country_event = {
	id = pact.15
	title = pact.15.t
	desc = pact.15.d

	is_triggered_only = yes

	option = {
		name = pact.15.a # We do it on our own then

		add_political_power = -20

		add_opinion_modifier = { target = SER modifier = Belgrade_Pact_refused_us_entry }
	}
}

###########################
# War starts
###########################

### Serbia: Send the ultimatum?
country_event = {
	id = pact.16
	title = pact.16.t
	desc = pact.16.d

	is_triggered_only = yes

	option = {
		name = pact.16.a # Send the ultimatum

		ai_chance = {
			factor = 95

			modifier = {
				factor = 0.5
				NOT = {
					is_in_faction_with = GRE
					is_in_faction_with = OTT
				}
			}
		}

		BUL = { country_event = { id = pact.17 hours = 4 } }
	}

	option = {
		name = pact.16.b # Don't send the ultimatum

		ai_chance = {
			factor = 5

			modifier = {
				factor = 2
				GER = { has_country_flag = supported_bulgaria }
			}
			modifier = {
				factor = 1.5
				AUS = { has_country_flag = supported_bulgaria }
			}
			modifier = {
				factor = 1.2
				HUN = { has_country_flag = supported_bulgaria }
			}
		}

		add_political_power = -100
	}
}

### Bulgaria: Ultimatum from Serbia
country_event = {
	id = pact.17
	title = pact.17.t
	desc = pact.17.d

	is_triggered_only = yes

	option = {
		name = pact.17.a # Then it is war

		ai_chance = { factor = 99 }

		add_political_power = 100

		SER = { country_event = { id = pact.18 } }
	}

	option = {
		name = pact.17.b # Give in to their demands

		ai_chance = {
			factor = 1

			modifier = {
				factor = 5

				NOT = { GER = { has_country_flag = supported_bulgaria } }
			}
			modifier = {
				factor = 10

				OR = {
					OTT = { has_country_flag = joined_belgradepact }
					OTT = { NOT = { has_country_flag = supported_bulgaria } }
				}
			}
		}

		add_political_power = -200

		belgrade_pact_gain_land_from_bulgaria = yes # custom effect

		every_country = {
			limit = {
				OR = {
					has_country_flag = joined_belgradepact

					tag = SER

					has_country_flag = supported_bulgaria # Germany etc. get this event too
				}
			}
			country_event = { id = pact.19 }

			# The Ottomans leave the Pact as they were only in for the war
			hidden_effect = {
				if = {
					limit = { OTT = { has_country_flag = joined_belgradepact } }
					SER = { remove_from_faction = OTT }
				}
			}
		}
	}
}

### Serbia: Ultimatum refused, war starts
country_event = {
	id = pact.18
	title = pact.18.t
	desc = pact.18.d

	is_triggered_only = yes

	option = {
		name = pact.18.a # They had their chance!

		declare_war_on = {
			target = BUL
			type = annex_everything
		}

		set_global_flag = balkan_war_started

		# Notify all Pact members
		every_country = {
			limit = {
				has_country_flag = joined_belgradepact
				is_in_faction_with = ROOT
				NOT = { tag = OTT } # Ottomans get a special event
			}
			country_event = { id = pact.20 } # Pact members: the war has started
		}

		# Event for Ottomans
		if = {
			limit = {
				OTT = {
					has_country_flag = joined_belgradepact
					is_in_faction_with = ROOT
				}
			}
			OTT = { country_event = { id = pact.21 } } # Ottomans: Declare war or send aid? 
		}
		
		hidden_effect = { news_event = { id = worldnews.37 days = 1 } }
	}
}

### The Bulgarians fold
country_event = {
	id = pact.19
	title = pact.19.t
	desc = pact.19.d

	is_triggered_only = yes

	option = {
		name = pact.19.a # They had no choice.

		trigger = { NOT = { has_country_flag = supported_bulgaria } } # Option only for Belgrade Pact

		add_political_power = 200

		effect_tooltip = { belgrade_pact_gain_land_from_bulgaria = yes }
	}

	option = {
		name = pact.19.b # Peace in our time.

		trigger = { has_country_flag = supported_bulgaria } # Option for Bulgaria's allies

		effect_tooltip = { belgrade_pact_gain_land_from_bulgaria = yes }
	}
}

### Pact members: the war has started
country_event = {
	id = pact.20
	title = pact.20.t
	desc = pact.20.d

	is_triggered_only = yes

	option = {
		name = pact.20.a # Onwards to victory

		add_political_power = 200

		add_manpower = 5000
	}
}

### Ottomans (in Belgrade Pact): the war has started, what will we do?
country_event = {
	id = pact.21
	title = pact.21.t
	desc = pact.21.d

	is_triggered_only = yes

	trigger = {
		is_subject = no
	}

	option = {
		name = pact.21.a # Honor the pact.

		ai_chance = { factor = 60 }

		add_political_power = 100

		# The Ottomans only join this war against Bulgaria
		hidden_effect = {
			SER = { remove_from_faction = OTT }
		}

		OTT = { add_to_war = { targeted_alliance = SER enemy = BUL } }

		hidden_effect = {
			OTT = { give_military_access = SER }
		}
	}

	option = {
		name = pact.21.b # Just send aid.

		ai_chance = { factor = 30 }

		clr_country_flag = joined_belgradepact

		SER = {
			remove_from_faction = OTT
			country_event = { id = pact.24 days = 3 }
		}

		set_country_flag = supported_serbia

		add_manpower = -1000
		hidden_effect = { SER = { add_manpower = 1000 } }
		send_equipment = { target = SER type = infantry_equipment amount = 1000 }

		add_political_power = 100
	}

	option = {
		name = pact.21.c # We cannot do anything

		ai_chance = { factor = 10 }

		clr_country_flag = joined_belgradepact

		SER = {
			remove_from_faction = OTT
			country_event = { id = pact.22 days = 1 }
		}

		hidden_effect = { BUL = { country_event = { id = pact.23 } } } # Notify Bulgaria: no second front

		# If the Ottomans somehow already joined the war, sign a white peace.
		if = {
			limit = { has_war_with = BUL }
			BUL = { white_peace_with_ROOT = yes }
		}

		add_political_power = -100
	}
}

### Serbia: The Ottomans betrayed us
country_event = {
	id = pact.22
	title = pact.22.t
	desc = pact.22.d

	is_triggered_only = yes

	option = {
		name = pact.22 # We will deal with them later.

		add_opinion_modifier = { target = OTT modifier = Belgrade_Pact_they_withdrew_boo }
	}
}

### Bulgaria: The Ottomans withdraw from the Belgrade Pact
country_event = {
	id = pact.23
	title = pact.23.t
	desc = pact.23.d

	is_triggered_only = yes

	option = {
		name = pact.23 # Good.

		add_opinion_modifier = { target = OTT modifier = Belgrade_Pact_they_withdrew_yay }
	}
}

### Serbia: The Ottomans send aid
country_event = {
	id = pact.24
	title = pact.24.t
	desc = pact.24.d

	is_triggered_only = yes

	option = {
		name = pact.24 # Good. But bad.

		custom_effect_tooltip = pact.24.tt

		effect_tooltip = { ROOT = { remove_from_faction = OTT } } # Show that the Ottomans leave the pact

		hidden_effect = { load_oob = SER_BalkanWar_help }
	}
}

### Ottomans: start of the war, support Bulgaria?
country_event = {
	id = pact.25
	title = pact.25.t
	desc = pact.25.d

	trigger = {
		tag = OTT
		has_country_flag = supported_bulgaria
		is_subject = no

		SER = {
			has_country_flag = founded_belgradepact
			is_faction_leader = yes
			has_war_with = BUL
		}
	}

	fire_only_once = yes

	mean_time_to_happen = {
		days = 3
	}

	option = {
		name = pact.25.a # Send aid

		ai_chance = { factor = 50 }

		hidden_effect = { BUL = { country_event = { id = pact.26 days = 1 } } } # Notify Bulgaria of aid

		add_manpower = -1000
		hidden_effect = { BUL = { add_manpower = 1000 } }
		send_equipment = { target = BUL type = infantry_equipment amount = 1000 }
	}

	option = {
		name = pact.25.b # Offer an alliance

		ai_chance = { factor = 40 }

		BUL = { country_event = { id = pact.27 days = 1 } } # Ask Bulgaria for alliance
	}

	option = {
		name = pact.25.c # We can't do anything

		ai_chance = { factor = 10 }

		add_political_power = -100

		BUL = { country_event = { id = pact.31 days = 1 } } # Notify Bulgaria of no support
	}
}

# Bulgaria: aid from a country arrives
country_event = {
	id = pact.26
	title = pact.26.t
	desc = pact.26.d

	is_triggered_only = yes

	option = {
		name = pact.26.a # Great

		custom_effect_tooltip = pact.26.tt

		hidden_effect = { load_oob = BUL_BalkanWar_help }

		hidden_effect = { add_opinion_modifier = { target = FROM modifier = Belgrade_Pact_sent_promised_aid }
}
	}
}

### Bulgaria: The Ottomans offer an alliance
country_event = {
	id = pact.27
	title = pact.27.t
	desc = pact.27.d

	is_triggered_only = yes

	option = {
		name = pact.27.a # Of course

		ai_chance = {
			factor = 90

			modifier = {
				factor = 0.5
				NOT = { GRE = { is_in_faction_with = SER } }
			}
		}

		OTT = { add_to_war = { targeted_alliance = BUL enemy = SER } }

		hidden_effect = {
			OTT = {
				give_military_access = BUL
				country_event = { id = pact.28 hours = 2 }
			}
		}
	}

	option = {
		name = pact.27.b # We don't need them.

		ai_chance = { factor = 10 }

		OTT = { country_event = { id = pact.29 hours = 4 } }
	}
}

### Ottomans: Bulgaria accepts our alliance
country_event = {
	id = pact.28
	title = pact.28.t
	desc = pact.28.d

	is_triggered_only = yes

	option = {
		name = pact.28.a # Together, we will defeat the Belgrade Pact.

		effect_tooltip = { add_to_war = { targeted_alliance = BUL enemy = SER } }

		clr_country_flag = supported_bulgaria
		set_country_flag = alliance_with_bulgaria
	}
}

### Ottomans: Bulgaria refuses our alliance
country_event = {
	id = pact.29
	title = pact.29.t
	desc = pact.29.d

	is_triggered_only = yes

	option = {
		name = pact.29.a # Good luck on your own then.

		clr_country_flag = supported_bulgaria
	}
}

### GER/AUS/HUN: we supported Bulgaria, send aid?
country_event = {
	id = pact.30
	title = pact.30.t
	desc = pact.30.d

	trigger = {
		NOT = { has_country_flag = asked_for_help_in_balkan_war }

		OR = {
			tag = AUS
			tag = HUN
		}

		has_country_flag = supported_bulgaria

		SER = {
			is_faction_leader = yes
			has_war_with = BUL
		}
	}

	mean_time_to_happen = {
		days = 3
	}

	immediate = {
		set_country_flag = asked_for_help_in_balkan_war
	}

	option = {
		name = pact.30.a # Send aid to Bulgaria.

		ai_chance = {
			factor = 70
		}

		hidden_effect = { BUL = { country_event = { id = pact.26 days = 1 } } } # Notify Bulgaria of aid

		add_manpower = -1000
		hidden_effect = { BUL = { add_manpower = 1000 } }
		send_equipment = { target = BUL type = infantry_equipment amount = 1000 }
	}

	option = {
		name = pact.30.b # Do nothing.

		ai_chance = {
			factor = 30

			modifier = {
				factor = 0
				OR = {
					has_war = yes
					is_subject = yes
				}
			}
		}

		clr_country_flag = supported_bulgaria

		BUL = { country_event = { id = pact.31 days = 2 } }
	}
}

### Bulgaria: <country> refuses to support us
country_event = {
	id = pact.31
	title = pact.31.t
	desc = pact.31.d

	is_triggered_only = yes

	option = {
		name = pact.31.a # Traitors!

		add_opinion_modifier = { target = FROM modifier = Belgrade_Pact_didnt_send_promised_aid }
	}
}

### Russia: Balkan War started, who to support?
country_event = {
	id = pact.32
	title = pact.32.t
	desc = pact.32.d

	trigger = {
		tag = RUS

		DKB = {
			OR = {
				exists = no
				is_subject_of = RUS
			}
		}

		SER = {
			is_faction_leader = yes
			has_war_with = BUL
		}
	}

	mean_time_to_happen = {
		days = 3
	}

	fire_only_once = yes

	option = {
		name = pact.32.a # Send aid to Serbia.

		ai_chance = {	factor = 50	}

		set_country_flag = supported_serbia

		hidden_effect = { SER = { country_event = { id = pact.33 days = 1 } } } # Notify Serbia of aid

		add_manpower = -1000
		hidden_effect = { SER = { add_manpower = 1000 } }
		send_equipment = { target = SER type = infantry_equipment amount = 1000 }

		hidden_effect = {
			SER = { add_opinion_modifier = { target = RUS modifier = Belgrade_Pact_supported_us } }
			BUL = { add_opinion_modifier = { target = RUS modifier = Belgrade_Pact_supported_serbia_boo } }
		}
	}

	option = {
		name = pact.32.b # Send aid to Bulgaria.

		ai_chance = {	factor = 10	}

		set_country_flag = supported_bulgaria

		hidden_effect = { BUL = { country_event = { id = pact.26 days = 1 } } } # Notify Bulgaria of aid

		add_manpower = -1000
		hidden_effect = { BUL = { add_manpower = 1000 } }
		send_equipment = { target = BUL type = infantry_equipment amount = 1000 }

		hidden_effect = {
			SER = { add_opinion_modifier = { target = RUS modifier = Belgrade_Pact_supported_enemy } }
			BUL = { add_opinion_modifier = { target = RUS modifier = Belgrade_Pact_supported_us } }
		}
	}

	option = {
		name = pact.32.c

		ai_chance = { factor = 40	} # We can't do anything

		add_political_power = -40
	}
}

### Serbia: Aid from Russia arrives
country_event = {
	id = pact.33
	title = pact.33.t
	desc = pact.33.d

	is_triggered_only = yes

	option = {
		name = pact.33.a # Good.

		custom_effect_tooltip = pact.33.tt

		hidden_effect = { load_oob = SER_BalkanWar_help }
	}
}

###########################
# End of the war, lessons learned
###########################

### End of the war: lessons learned for countries that sent aid
country_event = {
	id = pact.34
	title = pact.34.t
	desc = pact.34.d

	trigger = {
		OR = {
			tag = GER
			tag = OTT
			tag = AUS
			tag = HUN
			tag = RUS
		}

		OR = {
			has_country_flag = supported_bulgaria
			has_country_flag = supported_serbia
		}

		has_global_flag = balkan_war_ended
	}

	mean_time_to_happen = {
		days = 7
	}

	option = {
		name = pact.34.a # Great!

		army_experience = 10
		navy_experience = 10
		air_experience = 10

		add_manpower = 500

		add_political_power = 20

		clr_country_flag = supported_bulgaria
		clr_country_flag = supported_serbia
	}
}

###########################
# Peace events
###########################

### Bulgaria: we're losing, sue for peace?
country_event = {
	id = pact.35
	title = pact.35.t
	desc = pact.35.d

	trigger = {
		tag = BUL

		has_war_with = SER
		SER = { is_faction_leader = yes }

		NOT = { has_global_flag = balkan_war_ended }

		surrender_progress > 0.7
	}

	mean_time_to_happen = {
		days = 3
	}

	fire_only_once = yes

	option = {
		name = pact.35.a # Sue for peace.

		ai_chance = {
			factor = 60

			modifier = {
				factor = 0.5
				OTT = {
					has_country_flag = alliance_with_bulgaria
					has_war_with = SER
					surrender_progress < 0.2
				}
			}
		}

		add_political_power = -50

		SER = { country_event = { id = pact.36 } } # Send the peace offer to Serbia
	}

	option = {
		name = pact.35.b # We can still win this!

		ai_chance = {
			factor = 40

			modifier = {
				factor = 0.5
				surrender_progress > 0.8
			}
			modifier = {
				factor = 0.1
				surrender_progress > 0.9
			}
		}

		add_political_power = -100
	}
}

### Serbia: Bulgaria asks for peace
country_event = {
	id = pact.36
	title = pact.36.t
	desc = pact.36.d

	is_triggered_only = yes

	option = {
		name = pact.36.a # We are triumphant!

		ai_chance = {
			factor = 70

			modifier = {
				factor = 1.5
				has_war_with = OTT
			}
		}

		add_political_power = 200

		set_global_flag = balkan_war_ended

		BUL = { white_peace_with_ROOT = yes }

		# Cede disputed land with custom effect
		belgrade_pact_gain_land_from_bulgaria = yes

		hidden_effect = {
			# Let Bulgaria know that Serbia accepted the peace offer
			BUL = { country_event = { id = pact.37 } }

			# Let all other Pact members know that peace is signed
			every_country = {
				limit = { has_country_flag = joined_belgradepact }
				country_event = { id = pact.38 }
			}
		}
	}

	option = {
		name = pact.36.b # They will be crushed

		ai_chance = { factor = 30 }

		add_political_power = -50

		BUL = { country_event = { id = pact.46 } } # Notify Bulgaria of refusal
	}
}

### Bulgaria: Serbia accepted our peace offer
country_event = {
	id = pact.37
	title = pact.37.t
	desc = pact.37.d

	is_triggered_only = yes

	option = {
		name = pact.37.a # At least we exist!

		effect_tooltip = {
			SER = { white_peace = BUL }

			belgrade_pact_gain_land_from_bulgaria = yes
		}
	}
}

### Pact members: peace signed
country_event = {
	id = pact.38
	title = pact.38.t
	desc = pact.38.d

	is_triggered_only = yes

	option = {
		name = pact.38.a # The Belgrade Pact stands triumphant!

		add_political_power = 200

		effect_tooltip = {
			SER = { white_peace = BUL }

			belgrade_pact_gain_land_from_bulgaria = yes
		}
	}
}

### Ottomans: we're losing, sue for peace?
country_event = {
	id = pact.39
	title = pact.39.t
	desc = pact.39.d

	trigger = {
		tag = OTT
		has_country_flag = alliance_with_bulgaria

		BUL = {
			OR = {
				exists = no
				is_subject = yes
			}
		}

		has_war_with = SER
		SER = { is_faction_leader = yes }

		surrender_progress > 0.25

		# Constantinople and Edirne are controlled by the Pact
		if = {
			limit = { owns_state = 341 } # Edirne
			OR = {
				SER = { controls_state = 341 }
				GRE = { controls_state = 341 }
				MTN = { controls_state = 341 }
				ROM = { controls_state = 341 }
				RRM = { controls_state = 341 }
			}
		}
		if = {
			limit = { owns_state = 773 } # Constantinople 
			OR = {
				SER = { controls_state = 773 }
				GRE = { controls_state = 773 }
				MTN = { controls_state = 773 }
				ROM = { controls_state = 773 }
				RRM = { controls_state = 773 }
			}
		}
	}

	mean_time_to_happen = {
		days = 3
	}

	fire_only_once = yes

	option = {
		name = pact.39.a # Sue for peace.

		ai_chance = { factor = 100 }

		add_political_power = -50

		SER = { country_event = { id = pact.40 } } # Send the peace offer to Serbia
	}

	option = {
		name = pact.39.b # We can still win this!

		ai_chance = { factor = 0 }

		add_political_power = -100
	}
}

### Serbia: The Ottomans offer peace
country_event = {
	id = pact.40
	title = pact.40.t
	desc = pact.40.d

	is_triggered_only = yes

	option = {
		name = pact.40.a # The Belgrade Pact stands triumphant

		ai_chance = { factor = 100 }

		OTT = { white_peace_with_ROOT = yes }

		belgrade_pact_gain_land_from_ottomans = yes

		hidden_effect = {
			# Notify Ottomans of peace
			OTT = { country_event = { id = pact.41 } }

			# Notify all Pact members
			every_country = {
				limit = { has_country_flag = joined_belgradepact }
				country_event = { id = pact.42 }
			}
		}
	}

	option = {
		name = pact.40.b # No, they shall be crushed

		ai_chance = { factor = 0 }

		add_political_power = -100

		OTT = { country_event = { id = pact.46 } } # Notify Ottomans of refusal
	}
}

### Ottomans: Serbians accepted our peace offer
country_event = {
	id = pact.41
	title = pact.41.t
	desc = pact.41.d

	is_triggered_only = yes

	option = {
		name = pact.41.a # Unfortunate

		effect_tooltip = {
			SER = { white_peace = OTT }

			belgrade_pact_gain_land_from_ottomans = yes
		}
	}
}

### Pact members: Peace with the Ottomans
country_event = {
	id = pact.42
	title = pact.42.t
	desc = pact.42.d

	is_triggered_only = yes

	option = {
		name = pact.42.a # Belgrade Pact stands triumphant

		effect_tooltip = {
			SER = { white_peace = OTT }

			belgrade_pact_gain_land_from_ottomans = yes
		}
	}
}

### Serbia: Defeated Bulgaria but Ottomans are pushing us back
country_event = {
	id = pact.43
	title = pact.43.t
	desc = pact.43.d

	trigger = {
		tag = SER
		is_faction_leader = yes
		has_country_flag = founded_belgradepact

		BUL = {
			OR = {
				exists = no
				is_subject_of = SER
			}
		}

		has_war_with = OTT
		OTT = { has_country_flag = alliance_with_bulgaria }

		# Ottomans liberated Sofia and Plovdiv
		OTT = {
			controls_state = 48
			controls_state = 212
		}

		OR = {
			SER = { owns_state = 48 }
			any_other_country = {
				AND = {
					is_in_faction_with = SER
					owns_state = 48
				}
			}
		}
		OR = {
			SER = { owns_state = 212 }
			any_other_country = {
				AND = {
					is_in_faction_with = SER
					owns_state = 212
				}
			}
		}
	}

	mean_time_to_happen = {
		days = 7
	}

	fire_only_once = yes

	option = {
		name = pact.43.a # Sue for peace.

		ai_chance = { factor = 100 }

		add_political_power = -50

		OTT = { country_event = { id = pact.44 } } # Send the peace offer to the Ottomans
	}

	option = {
		name = pact.43.b # We can still win this!

		ai_chance = { factor = 0 }

		add_political_power = -100
	}
}

### Ottomans: liberated Bulgaria, Serbia offers peace
country_event = {
	id = pact.44
	title = pact.44.t
	desc = pact.44.d

	is_triggered_only = yes

	option = {
		name = pact.44.a # Enough bloodshed. End this war.

		ai_chance = { factor = 100 }

		set_global_flag = balkan_war_ended

		SER = { white_peace_with_ROOT = yes }

		SER = { dismantle_faction = yes }

		ottomans_liberate_bulgaria = yes

		hidden_effect = {
			# Notify all Pact members of peace
			every_country = {
				limit = {
					OR = {
						has_country_flag = founded_belgradepact
						has_country_flag = joined_belgradepact
					}
				}
				country_event = { id = pact.45 }
			}
		}
	}

	option = {
		name = pact.44.b # No, they shall be crushed

		ai_chance = { factor = 0 }

		add_political_power = -100

		SER = { country_event = { id = pact.46 } } # Notify Serbia of refusal
	}
}

### Pact members: peace was signed
country_event = {
	id = pact.45
	title = pact.45.t
	desc = pact.45.d

	is_triggered_only = yes

	option = {
		name = pact.45.a # Unfortunate

		add_political_power = -100
		
		clr_country_flag = founded_belgradepact
		clr_country_flag = joined_belgradepact

		effect_tooltip = {
			OTT = { white_peace = SER }

			SER = { dismantle_faction = yes }

			ottomans_liberate_bulgaria = yes
		}
	}
}

### <country> refuses our peace offer
country_event = {
	id = pact.46
	title = pact.46.t
	desc = pact.46.d

	is_triggered_only = yes

	option = {
		name = pact.46.a # We need to turn the tide
	}
}

### Serbia: we're losing, sue for peace?
country_event = {
	id = pact.47
	title = pact.47.t
	desc = pact.47.d

	trigger = {
		tag = SER
		is_faction_leader = yes
		has_country_flag = founded_belgradepact

		has_war_with = BUL

		# Morava or Nis is occupied by the enemy
		OR = {
			NOT = { 767 = { is_controlled_by = SER } }
			NOT = { 108 = { is_controlled_by = SER } }
		}

		# Greece or Romania has also to be in a bad shape
		OR = {
			AND = {
				is_in_faction_with = GRE
				OR = {
					GRE = { has_capitulated = yes }
					GRE = { surrender_progress > 0.7 }
				}
			}
			AND = {
				is_in_faction_with = ROM
				OR = {
					ROM = { has_capitulated = yes }
					ROM = { surrender_progress > 0.7 }
				}
			}
			AND = {
				is_in_faction_with = RRM
				OR = {
					RRM = { has_capitulated = yes }
					RRM = { surrender_progress > 0.7 }
				}
			}
		}
	}

	mean_time_to_happen = {
		days = 3
	}

	fire_only_once = yes

	option = {
		name = pact.47.a # Sue for peace.

		ai_chance = { factor = 100 }

		BUL = { country_event = { id = pact.48 } }
	}

	option = {
		name = pact.47.b # We can still win this

		ai_chance = { factor = 0 }

		add_political_power = -100
	}
}

### Bulgaria: Serbia offers peace
country_event = {
	id = pact.48
	title = pact.48.t
	desc = pact.48.d

	is_triggered_only = yes
	
	immediate = {
		SER = { save_event_target_as = white_peace_receiver }
	}

	option = {
		name = pact.48.a # We are triumphant.

		ai_chance = { factor = 100 }

		hidden_effect = {
			every_country = {
				limit = {
					is_in_faction_with = SER
					NOT = { is_subject_of = SER }
					NOT = { has_war_with = BUL }
				}
				set_country_flag = did_not_join_balkan_war
			}
		}

		set_global_flag = balkan_war_ended

		add_political_power = 100

		# White peace with Ottomans and their puppets
		if = {
			limit = {
				OTT = {
					has_country_flag = alliance_with_bulgaria
					has_war_with = SER
				}
			}
			OTT = { white_peace_with_TARGET = yes }
		}

		white_peace_with_TARGET = yes

		SER = { dismantle_faction = yes }

		effect_tooltip = {
			transfer_state = 767 # Nis

			if = {
				limit = {
					SER = { owns_state = 841 }
				}
				transfer_state = 841 # Pirot
				transfer_state = 106 # Macedonia
			}

			if = {
				limit = {
					ROM = {
						has_country_flag = joined_belgradepact
						NOT = { has_country_flag = did_not_join_balkan_war }
						owns_state = 81
					}
				}
				81 = { set_demilitarized_zone = yes } # Oltenia
			}
			if = {
				limit = {
					RRM = {
						has_country_flag = joined_belgradepact
						NOT = { has_country_flag = did_not_join_balkan_war }						
						owns_state = 81
					}
				}
				81 = { set_demilitarized_zone = yes } # Oltenia
			}
			if = {
				limit = {
					GRE = {
						has_country_flag = joined_belgradepact
						NOT = { has_country_flag = did_not_join_balkan_war }						
						owns_state = 768
					}
				}
				768 = { set_demilitarized_zone = yes } # Thessalia
				add_state_core = 731

				if = {
					limit = { GRE = { owns_state = 731 } }
					transfer_state = 731 # Central Macedonia
					transfer_state = 769 # Western Thrace
					transfer_state = 184 # Eastern Thrace
				}
			}

			add_timed_idea = { idea = BUL_reparation_payments_from_serbia days = 1460 }
		}

		hidden_effect = {
			# Notify all Pact members of peace
			SER = { country_event = { id = pact.49 hours = 2 } }
			if = {
				limit = {
					ROM = {
						has_country_flag = joined_belgradepact
						NOT = { has_country_flag = did_not_join_balkan_war }						
					}
				}
				ROM = { country_event = { id = pact.50 hours = 2 } }
			}
			if = {
				limit = {
					RRM = {
						has_country_flag = joined_belgradepact
						NOT = { has_country_flag = did_not_join_balkan_war }						
					}
				}
				RRM = { country_event = { id = pact.50 hours = 2 } }
			}
			if = {
				limit = {
					GRE = {
						has_country_flag = joined_belgradepact
						NOT = { has_country_flag = did_not_join_balkan_war }						
					}
				}
				GRE = { country_event = { id = pact.51 hours = 2 } }
			}
		}
	}

	option = {
		name = pact.48.b # No, they shall be crushed.

		ai_chance = { factor = 0 }

		add_political_power = -100

		SER = { country_event = { id = pact.46 } } # Notify Serbia of refusal
	}
}

### Serbia: peace was signed, we lost the war
country_event = {
	id = pact.49
	title = pact.49.t
	desc = pact.49.d

	is_triggered_only = yes

	immediate = {
		SER = { save_event_target_as = white_peace_receiver }

		if = {
			limit = { owns_state = 767 }
			BUL = { transfer_state = 767 } # Nis
		}
		if = {
			limit = { owns_state = 841 }
			BUL = { transfer_state = 841 } # Pirot
		}
		if = {
			limit = { owns_state = 106 }
			BUL = { transfer_state = 106 } # Macedonia
		}

		SER = { add_timed_idea = { idea = SER_reparation_payments days = 1460 } }

		hidden_effect = {
			BUL = { add_timed_idea = { idea = BUL_reparation_payments_from_serbia days = 1460 } }
		}
	}

	option = {
		name = pact.49.a # At least we exist

		effect_tooltip = {
			BUL = { white_peace_with_TARGET = yes }

			SER = { dismantle_faction = yes }
		}
	}
}

### Romania: peace was signed, we lost the war
country_event = {
	id = pact.50
	title = pact.50.t
	desc = pact.50.d

	is_triggered_only = yes

	immediate = {
		SER = { save_event_target_as = white_peace_receiver }
		81 = { set_demilitarized_zone = yes } # Oltenia

		if = {
			limit = { owns_state = 772 }
			BUL = { transfer_state = 772 } # Dobrogea
		}
		if = {
			limit = { owns_state = 77 }
			BUL = { transfer_state = 77 } # Southern Dobruja
		}

		if = {
			limit = {
				tag = ROM
				NOT = { country_exists = RRM }
				is_ai = yes
			}
			set_politics = { ruling_party = authoritarian_democrat elections_allowed = no }
			hidden_effect = { add_popularity = { ideology = authoritarian_democrat popularity = 0.3 } }
		}
	}

	option = {
		name = pact.50.a # At least we exist

		effect_tooltip = {
			BUL = { white_peace_with_TARGET = yes }

			SER = { dismantle_faction = yes }
		}
	}
}

### Greece: peace was signed, we lost the war
country_event = {
	id = pact.51
	title = pact.51.t
	desc = {
		trigger = { OTT = { has_country_flag = alliance_with_bulgaria } }
		text = pact.51.desc_payments_to_ottomans
	}
	desc = {
		trigger = { NOT = { OTT = { has_country_flag = alliance_with_bulgaria } } }
		text = pact.51.desc_no_ottomans
	}

	is_triggered_only = yes
	
	immediate = {
		SER = { save_event_target_as = white_peace_receiver }
	}

	immediate = {
		768 = { set_demilitarized_zone = yes } # Thessalia

		if = {
			limit = { owns_state = 982 }
			BUL = { transfer_state = 982 } # Salonika
		}
		if = {
			limit = { owns_state = 731 }
			BUL = { transfer_state = 731 } # Central Macedonia
		}
		if = {
			limit = { owns_state = 769 }
			BUL = { transfer_state = 769 } # Western Thrace
		}
		if = {
			limit = { owns_state = 184 }
			BUL = { transfer_state = 184 } # 'Eastern' Thrace
		}

		# Greece renounces their claims
		remove_state_core = 731
		remove_state_core = 769
		remove_state_core = 184
		# Central Macedonia is now a core of Bulgaria
		BUL = { add_state_core = 731 }

		if = {
			limit = { OTT = { has_country_flag = alliance_with_bulgaria } }

			GRE = { add_timed_idea = { idea = GRE_reparation_payments days = 1460 } }

			hidden_effect = {
				OTT = { add_timed_idea = { idea = OTT_reparation_payments_from_greece days = 1460 } }
			}
		}
	}

	option = {
		name = pact.51.a # At least we exist

		effect_tooltip = {
			BUL = { white_peace_with_TARGET = yes }

			SER = { dismantle_faction = yes }
		}
	}
}

###########################
# Post-war joining of Greece and Romania
###########################

### Serbia: we control Central Macedonia, offer it to the Greeks?
country_event = {
	id = pact.52
	title = pact.52.t
	desc = pact.52.d

	trigger = {
		tag = SER
		is_faction_leader = yes
		has_country_flag = founded_belgradepact

		has_war = no

		NOT = {
			is_in_faction_with = GRE
			GRE = {
				has_country_flag = joined_belgradepact
				is_subject = yes
			}
		}

		owns_state = 731 # Central Macedonia
	}

	mean_time_to_happen = {
		days = 7
	}

	fire_only_once = yes

	option = {
		name = pact.52.a # Offer Central Macedonia to Greece

		ai_chance = { factor = 80 }

		GRE = { country_event = { id = pact.53 } }
	}
	option = {
		name = pact.52.b # It will remain with us

		ai_chance = {
			factor = 20

			modifier = {
				factor = 0.5
				NOT = { is_in_faction_with = OTT }
			}
		}
	}
}

### Greece: Serbia offers us Central Macedonia
country_event = {
	id = pact.53
	title = pact.53.t
	desc = pact.53.d

	is_triggered_only = yes

	option = {
		name = pact.53.a # Welcome home Macedonia.

		ai_chance = { factor = 85 }

		SER = { add_to_faction = GRE }
		hidden_effect = { reverse_add_opinion_modifier = { target = SER modifier = Belgrade_Pact_joined_yay }}
		set_country_flag = joined_belgradepact

		transfer_state = 731 # Central Macedonia

		if = {
			limit = { 769 = { is_owned_by = SER } }
			transfer_state = 769 # Western Thrace
			hidden_effect = { add_state_core = 769 }
		}

		hidden_effect = { SER = { country_event = { id = pact.54 } } }
	}
	option = {
		name = pact.53.b # Agree, but demand Eastern Thrace as well

		trigger = {
			OTT = {
				has_country_flag = joined_belgradepact
				owns_state = 184 # Eastern Thrace
			}
		}

		ai_chance = { factor = 10 }

		SER = { add_to_faction = GRE }
		hidden_effect = { reverse_add_opinion_modifier = { target = SER modifier = Belgrade_Pact_joined_yay }}
		set_country_flag = joined_belgradepact

		transfer_state = 731 # Central Macedonia

		if = {
			limit = { 769 = { is_owned_by = SER } }
			transfer_state = 769 # Western Thrace
			hidden_effect = { add_state_core = 769 }
		}

		hidden_effect = { SER = { country_event = { id = pact.54 } } } # The Greeks joined
		SER = { country_event = { id = pact.55 hours = 6 } } # The Greeks want all of Thrace as well
	}

	option = {
		name = pact.53.c # Decline

		ai_chance = { factor = 5 }

		SER = { country_event = { id = pact.60 hours = 6 } }
	}
}

### Serbia: Greece joined the Pact
country_event = {
	id = pact.54
	title = pact.54.t
	desc = pact.54.d

	is_triggered_only = yes

	option = {
		name = pact.54.a # Welcome to the Pact.

		effect_tooltip = {
			add_to_faction = GRE

			GRE = {
				transfer_state = 731 # Central Macedonia

				if = {
					limit = { 769 = { is_owned_by = GRE } }
					transfer_state = 769 # Western Thrace
				}
			}
		}
	}
}

### Serbia: Greece demands Eastern Thrace as well
country_event = {
	id = pact.55
	title = pact.55.t
	desc = pact.55.d

	is_triggered_only = yes

	option = {
		name = pact.55.a # Demand the Ottomans to cede it to Greece

		ai_chance = { factor = 10 }

		OTT = { country_event = { id = pact.56 hours = 6 } }
	}

	option = {
		name = pact.55.b # It will stay under Ottoman occupation

		ai_chance = { factor = 90 }

		GRE = { country_event = { id = pact.58 hours = 6 } }
	}
}

### Ottomans: Greece demands Eastern Thrace
country_event = {
	id = pact.56
	title = pact.56.t
	desc = pact.56.d

	is_triggered_only = yes

	option = {
		name = pact.56.a # Very well then

		ai_chance = { factor = 60 }

		GRE = { country_event = { id = pact.57 } }
	}

	option = {
		name = pact.56.b # No, we are keeping our new lands

		ai_chance = { factor = 40 }

		GRE = { country_event = { id = pact.59 hours = 6 } }
	}
}

### Greece: Ottomans agreed
country_event = {
	id = pact.57
	title = pact.57.t
	desc = pact.57.d

	is_triggered_only = yes

	option = {
		name = pact.57.a # Great

		GRE = {
			if = {
				limit = { OTT = { owns_state = 769 } }
				transfer_state = 769 # Western Thrace
				hidden_effect = { add_state_core = 769 }
			}
			transfer_state = 184 # Eastern Thrace
			hidden_effect = { add_state_core = 184 }
		}
	}
}

### Greece: Serbia will not pressure the Ottomans
country_event = {
	id = pact.58
	title = pact.58.t
	desc = pact.58.d

	is_triggered_only = yes

	option = {
		name = pact.58.a # We will get it later

		add_opinion_modifier = { target = SER modifier = Belgrade_Pact_serbia_wont_pressure_ottomans }
	}
}

### Greece: The Ottomans will not cede Thrace
country_event = {
	id = pact.59
	title = pact.59.t
	desc = pact.59.d

	is_triggered_only = yes

	option = {
		name = pact.59.a # We will get it later

		add_opinion_modifier = { target = OTT modifier = Belgrade_Pact_refused_thrace }
	}
}

### Serbia: Greece won't join the Belgrade Pact
country_event = {
	id = pact.60
	title = pact.60.t
	desc = pact.60.d

	is_triggered_only = yes

	option = {
		name = pact.60.a # We will get it later
	}
}

### Serbia: we control Dobrudzha, offer it to Romania?
country_event = {
	id = pact.61
	title = pact.61.t
	desc = pact.61.d

	trigger = {
		tag = SER
		is_faction_leader = yes
		has_country_flag = founded_belgradepact

		has_war = no

		OR = {
			NOT = {
				is_in_faction_with = ROM
				ROM = {
					has_country_flag = joined_belgradepact
					is_subject = yes
				}
				country_exists = RRM
			}
			NOT = {
				is_in_faction_with = RRM
				RRM = {
					has_country_flag = joined_belgradepact
					is_subject = yes
				}
				country_exists = ROM
			}
		}

		owns_state = 772 # Dobrudzha
	}

	mean_time_to_happen = {
		days = 7
	}

	fire_only_once = yes

	option = {
		name = pact.61.a # Offer Dobrudzha to Romania

		ai_chance = { factor = 100 }

		if = {
			limit = { country_exists = ROM }
			ROM = { country_event = { id = pact.62 } }
		}
		if = {
			limit = { country_exists = RRM }
			RRM = { country_event = { id = pact.62 } }
		}
	}
	option = {
		name = pact.61.b # It will remain with us

		ai_chance = { factor = 0 }
	}
}

### Romania: Serbia offers us Dobrudzha
country_event = {
	id = pact.62
	title = pact.62.t
	desc = pact.62.d

	is_triggered_only = yes

	option = {
		name = pact.62.a # Welcome home, Dobrudzha.

		ai_chance = { factor = 99 }

		SER = { add_to_faction = ROOT }
		hidden_effect = { reverse_add_opinion_modifier = { target = SER modifier = Belgrade_Pact_joined_yay }}
		set_country_flag = joined_belgradepact

		transfer_state = 772 # Dobrudzha
		if = {
			limit = { SER = { owns_state = 77 } }
			transfer_state = 77 # Silistra
		}

		hidden_effect = { SER = { country_event = { id = pact.63 } } }
	}

	option = {
		name = pact.62.b # We don't want it.

		ai_chance = { factor = 1 }

		SER = { country_event = { id = pact.60 } }
	}
}

### Serbia: Romania joined the Pact
country_event = {
	id = pact.63
	title = pact.63.t
	desc = pact.63.d

	is_triggered_only = yes

	option = {
		name = pact.63.a # Great!

		effect_tooltip = {
			add_to_faction = FROM

			FROM = {
				transfer_state = 77 # Dobrudzha
				transfer_state = 772 # Silistra
			}
		}
	}
}

###########################
# Post-war Belgrade Pact occupation of Bulgaria
###########################

# Set up occupation zones
country_event = {
	id = pact.64
	title = pact.64.t
	desc = pact.64.d

	fire_only_once = yes
	trigger = {
		tag = SER
		is_faction_leader = yes
		has_country_flag = founded_belgradepact

		# When the war has started and Bulgaria doesn't exist, it probably is annexed by Serbia
		has_global_flag = balkan_war_started
		NOT = { country_exists = BUL }

		# Serbia or another Pact ally controls a Bulgarian core state that is not their core
		OR = {
			any_owned_state = {
				NOT = {
					is_core_of = SER
					is_claimed_by = SER
				}
				is_core_of = BUL
			}
			
			any_country = {
				is_in_faction_with = SER
				has_country_flag = joined_belgradepact
				any_owned_state = {
					NOT = {
						is_core_of = THIS
						is_claimed_by = THIS
					}
					is_core_of = BUL
				}
			}
		}
	}

	mean_time_to_happen = {
		days = 3
	}

	option = {
		name = pact.64.a # Occupy Bulgaria

		ai_chance = { factor = 100 }

		set_country_flag = occupation_of_bulgaria

		add_ideas = SER_occupation_of_bulgaria_idea

		belgrade_pact_occupies_bulgaria = yes

		every_country = {
			limit = {
				is_in_faction_with = SER
				has_country_flag = joined_belgradepact
				any_owned_state = {
					NOT = {
						is_core_of = THIS
						is_claimed_by = THIS
					}
					is_core_of = BUL
				}
			}

			country_event = { id = pact.65 hours = 6 }
		}
	}

	option = {
		name = pact.64.b # Let them have their independence

		ai_chance = { factor = 0 }

		add_political_power = -100

		# Transfer all Bulgarian states to Bulgaria
		every_owned_state = {
			limit = {
				NOT = {
					is_core_of = ROOT
					is_claimed_by = ROOT
				}
				is_core_of = BUL
			}
			BUL = { transfer_state = PREV }
		}

		# Pact members asked to give up land
		every_country = {
			limit = { has_country_flag = joined_belgradepact }
			country_event = { id = pact.68 }
		}
	}
}

# Pact members: Serbia asks to set up occupation zones
country_event = {
	id = pact.65
	title = pact.65.t
	desc = pact.65.d

	is_triggered_only = yes

	option = {
		name = pact.65.a # Very well

		ai_chance = { factor = 100 }		

		set_country_flag = occupation_of_bulgaria

		belgrade_pact_occupies_bulgaria = yes
	}

	option = {
		name = pact.65.b # No

		ai_chance = { factor = 0 }

		add_political_power = -200

		effect_tooltip = {
			SER = { remove_from_faction = ROOT }
		}

		SER = { country_event = { id = pact.66 hours = 6 } }
	}
}

# Serbia: [Country] refuses to set up occupation zone
country_event = {
	id = pact.66
	title = pact.66.t
	desc = pact.66.d

	is_triggered_only = yes

	option = {
		name = pact.66.a # This is outrageous!

		# SER removing faction members, as the eventchain is sent to all members of SER's faction
		remove_from_faction = FROM

		reverse_add_opinion_modifier = { target = SER modifier = Belgrade_Pact_refused_occupation_zone }
	}
}

# End of the occupation of Bulgaria
country_event = {
	id = pact.67
	title = pact.67.t
	desc = pact.67.d

	is_triggered_only = yes # Triggered by Serbian focus

	option = {
		name = pact.67.a # End the occupation

		# Transfer all Bulgarian states to Bulgaria
		every_owned_state = {
			limit = {
				NOT = {
					is_core_of = ROOT
					is_claimed_by = ROOT
				}
				is_core_of = BUL
			}
			BUL = { transfer_state = PREV }
		}

		puppet = BUL

		# Bulgaria gets the Serbian government type
		BUL = { copy_government_of_ROOT = yes }

		# Bulgaria transfer some factories
		belgrade_pact_loot_factory_from_bulgaria = yes

		# Ask Pact members to cede their occupied lands to Bulgaria
		every_country = {
			limit = { has_country_flag = joined_belgradepact }
			country_event = { id = pact.68 }
		}

		BUL = { country_event = { id = pact.69 days = 3 } } # Bulgaria renounces her claims

		clr_country_flag = occupation_of_bulgaria
	}
}

# Pact members: end of the occupation, cede land to Bulgaria?
country_event = {
	id = pact.68
	title = pact.68.t
	desc = pact.68.d

	is_triggered_only = yes

	option = {
		name = pact.68.a # Agree

		ai_chance = { factor = 100 }

		# Transfer all Bulgarian states to Bulgaria
		every_owned_state = {
			limit = {
				NOT = {
					is_core_of = ROOT
					is_claimed_by = ROOT
				}
				is_core_of = BUL
			}
			BUL = { transfer_state = PREV }
		}

		# Bulgaria transfers some factories to this country
		belgrade_pact_loot_factory_from_bulgaria = yes

		clr_country_flag = occupation_of_bulgaria
	}

	option = {
		name = pact.68.b # No, we keep what we have

		ai_chance = { factor = 0 }

		add_political_power = -50

		reverse_add_opinion_modifier = { target = SER modifier = Belgrade_Pact_refused_to_end_occupation }

		clr_country_flag = occupation_of_bulgaria
	}
}

# Bulgaria renounces its claims
country_event = {
	id = pact.69
	title = pact.69.t
	desc = pact.69.d

	is_triggered_only = yes

	option = {
		name = pact.69.a # We have no choice

		every_state = {
			limit = {
				OR = {
					is_core_of = BUL
					is_claimed_by = BUL
				}
				NOT = { is_owned_by = BUL }
				NOT = {
					state = 48 # Sofia
					state = 211 # Burgas
					state = 212 # Plovdiv
					state = 770 # Ploven
					state = 771 # Varna
				}
			}
			BUL = {
				remove_state_core = PREV
				remove_state_claim = PREV
			}
		}

		hidden_effect = {
			load_oob = BUL_reestablished # 4 infantry divisions

			# Remove all negative opinion modifiers
			SER = { remove_opinion_modifier = { target = BUL modifier = embargo } }
			GRE = { remove_opinion_modifier = { target = BUL modifier = embargo } }
			ROM = { remove_opinion_modifier = { target = BUL modifier = embargo } }
			RRM = { remove_opinion_modifier = { target = BUL modifier = embargo } }
			OTT = { remove_opinion_modifier = { target = BUL modifier = embargo } }
			MTN = { remove_opinion_modifier = { target = BUL modifier = embargo } }
			SER = { remove_opinion_modifier = { target = BUL modifier = Balkans_hates_bulgaria } }
			GRE = { remove_opinion_modifier = { target = BUL modifier = Balkans_hates_bulgaria } }
			ROM = { remove_opinion_modifier = { target = BUL modifier = Balkans_hates_bulgaria } }
			RRM = { remove_opinion_modifier = { target = BUL modifier = Balkans_hates_bulgaria } }

			remove_opinion_modifier = { target = SER modifier = Balkans_hates_neighbours }
			remove_opinion_modifier = { target = GRE modifier = Balkans_hates_neighbours }
			remove_opinion_modifier = { target = ROM modifier = Balkans_hates_neighbours }
			remove_opinion_modifier = { target = RRM modifier = Balkans_hates_neighbours }
		}
	}
}
