
SAF_reform_segregation_1 = {
	if = {
		limit = { has_idea = SAF_segregation_4 }
		swap_ideas = {
			remove_idea = SAF_segregation_4
			add_idea = SAF_segregation_5
		}
	}
	if = {
		limit = { has_idea = SAF_segregation_3 }
		swap_ideas = {
			remove_idea = SAF_segregation_3
			add_idea = SAF_segregation_4
		}
	}
	if = {
		limit = { has_idea = SAF_segregation_2 }
		swap_ideas = {
			remove_idea = SAF_segregation_2
			add_idea = SAF_segregation_3
		}
	}
	if = {
		limit = { has_idea = SAF_segregation_1 }
		swap_ideas = {
			remove_idea = SAF_segregation_1
			add_idea = SAF_segregation_2
		}
	}
}

SAF_reform_segregation_2 = {
	if = {
		limit = { has_idea = SAF_segregation_4 }
		swap_ideas = {
			remove_idea = SAF_segregation_4
			add_idea = SAF_segregation_5
		}
	}
	if = {
		limit = { has_idea = SAF_segregation_3 }
		swap_ideas = {
			remove_idea = SAF_segregation_3
			add_idea = SAF_segregation_5
		}
	}
	if = {
		limit = { has_idea = SAF_segregation_2 }
		swap_ideas = {
			remove_idea = SAF_segregation_2
			add_idea = SAF_segregation_4
		}
	}
	if = {
		limit = { has_idea = SAF_segregation_1 }
		swap_ideas = {
			remove_idea = SAF_segregation_1
			add_idea = SAF_segregation_3
		}
	}
}

SAF_increase_segregation_1 = {
	if = {
		limit = { has_idea = SAF_segregation_2 }
		swap_ideas = {
			remove_idea = SAF_segregation_2
			add_idea = SAF_segregation_1
		}
	}
	if = {
		limit = { has_idea = SAF_segregation_3 }
		swap_ideas = {
			remove_idea = SAF_segregation_3
			add_idea = SAF_segregation_2
		}
	}
	if = {
		limit = { has_idea = SAF_segregation_4 }
		swap_ideas = {
			remove_idea = SAF_segregation_4
			add_idea = SAF_segregation_3
		}
	}
	if = {
		limit = { has_idea = SAF_segregation_5 }
		swap_ideas = {
			remove_idea = SAF_segregation_5
			add_idea = SAF_segregation_4
		}
	}
}

SAF_increase_segregation_2 = {
	if = {
		limit = { has_idea = SAF_segregation_2 }
		swap_ideas = {
			remove_idea = SAF_segregation_2
			add_idea = SAF_segregation_1
		}
	}
	if = {
		limit = { has_idea = SAF_segregation_3 }
		swap_ideas = {
			remove_idea = SAF_segregation_3
			add_idea = SAF_segregation_1
		}
	}
	if = {
		limit = { has_idea = SAF_segregation_4 }
		swap_ideas = {
			remove_idea = SAF_segregation_4
			add_idea = SAF_segregation_2
		}
	}
	if = {
		limit = { has_idea = SAF_segregation_5 }
		swap_ideas = {
			remove_idea = SAF_segregation_5
			add_idea = SAF_segregation_3
		}
	}
}

SAF_release_rhodesia = {
	hidden_effect = {
		if = {
			limit = { owns_state = 545 }
			ZIM = {
				transfer_state = 545
				set_cosmetic_tag = ZIM_RHO_ENG
				load_oob = RHO_civil_war
				create_country_leader = {
					name = "Sir Herbert J. Stanley"
					picture = "Portrait_Zimbabwe_James_Stanley.tga"
					expire = "1965.1.1"
					ideology = social_conservative_subtype
					traits = { }
				}
				set_politics = {
					ruling_party = social_conservative
					elections_allowed = no
				}
			}
			if = {
				limit = { has_government = social_conservative }
				puppet = ZIM
			}
		}
	}
}

SAF_copy_ideas = {
	remove_ideas = {
		SAF_segregation_1
		SAF_segregation_2
		SAF_segregation_3
		SAF_segregation_4
		SAF_segregation_5
	}
	if = {
		limit = { SAF = { has_country_flag = SAF_PNP_split } }
		set_country_flag = SAF_PNP_split
	}
	if = {
		limit = {
			SAF = { has_idea = SAF_black_monday_1 }
			NOT = { has_idea = SAF_black_monday_1 }
		}
		add_ideas = SAF_black_monday_1
	}
	if = {
		limit = {
			SAF = { has_idea = SAF_black_monday_2 }
			NOT = { has_idea = SAF_black_monday_2 }
		}
		add_ideas = SAF_black_monday_2
	}
	if = {
		limit = { has_government = social_conservative }
		add_ideas = SAF_segregation_3
	}
	if = {
		limit = {
			NOT = { has_government = social_conservative }
		}
		add_ideas = SAF_segregation_1
	}
	if = {
		limit = {
			SAF = { has_idea = SAF_entente_investment }
			NOT = { has_idea = SAF_entente_investment }
		}
		add_ideas = SAF_entente_investment
	}
	if = {
		limit = {
			SAF = { has_idea = SAF_trade_focus_idea }
			NOT = { has_idea = SAF_trade_focus_idea }
		}
		add_ideas = SAF_trade_focus_idea
	}
	if = {
		limit = {
			SAF = { has_idea = SAF_defense_focus_idea }
			NOT = { has_idea = SAF_defense_focus_idea }
		}
		add_ideas = SAF_defense_focus_idea
	}
	if = {
		limit = {
			SAF = { has_idea = SAF_army_production_idea }
			NOT = { has_idea = SAF_army_production_idea }
		}
		add_ideas = SAF_army_production_idea
	}
	if = {
		limit = {
			SAF = { has_idea = SAF_new_recruits }
			NOT = { has_idea = SAF_new_recruits }
		}
		add_ideas = SAF_new_recruits
	}
	if = {
		limit = {
			SAF = { has_idea = SAF_native_nco_focus }
			NOT = { has_idea = SAF_native_nco_focus }
		}
		add_ideas = SAF_native_nco_focus
	}
	if = {
		limit = {
			SAF = { has_idea = SAF_army_focus }
			NOT = { has_idea = SAF_army_focus }
		}
		add_ideas = SAF_army_focus
	}
	if = {
		limit = {
			SAF = { has_idea = SAF_armor_production_idea }
			NOT = { has_idea = SAF_armor_production_idea }
		}
		add_ideas = SAF_armor_production_idea
	}
	if = {
		limit = {
			SAF = { has_idea = SAF_air_production }
			NOT = { has_idea = SAF_air_production }
		}
		add_ideas = SAF_air_production
	}
	if = {
		limit = {
			SAF = { has_idea = SAF_air_focus }
			NOT = { has_idea = SAF_air_focus }
		}
		add_ideas = SAF_air_focus
	}
	if = {
		limit = {
			SAF = { has_idea = SAF_tech_school_idea }
			NOT = { has_idea = SAF_tech_school_idea }
		}
		add_ideas = SAF_tech_school_idea
	}
	if = {
		limit = {
			SAF = { has_idea = SAF_navy_production }
			NOT = { has_idea = SAF_navy_production }
		}
		add_ideas = SAF_navy_production
	}
	if = {
		limit = {
			SAF = { has_idea = SAF_navy_focus }
			NOT = { has_idea = SAF_navy_focus }
		}
		add_ideas = SAF_navy_focus
	}
}

SAF_add_federation_generals = {
	create_field_marshal = { #Auto-Generated
		name = "Jan Smuts"
		portrait_path = "gfx/leaders/SAF/Portrait_SAF_Jan_Smuts.tga"
		traits = {
			offensive_doctrine
			old_guard
		}
		skill = 3
		id = 970
	}
	create_corps_commander = { #Auto-Generated
		name = "Leonard Beyers"
		portrait_path = "gfx/leaders/SAF/Portrait_SAF_Leonard_Beyers.tga"
		traits = {
		}
		skill = 1
		id = 971
	}
	create_corps_commander = { #Auto-Generated
		name = "George Brink"
		portrait_path = "gfx/leaders/SAF/Portrait_SAF_George_Brink.tga"
		traits = {
			old_guard
			commando
		}
		skill = 3
		id = 972
	}
	create_corps_commander = { #Auto-Generated
		name = "Nick Bierman"
		portrait_path = "gfx/leaders/SAF/Portrait_SAF_Nick_Bierman.tga"
		traits = {
			old_guard
		}
		skill = 1
		id = 976
	}
	create_corps_commander = { #Auto-Generated
		name = "Evered Poole"
		portrait_path = "gfx/leaders/SAF/Portrait_SAF_Evered_Poole.tga"
		traits = {
			panzer_leader
			trickster
		}
		skill = 2
		id = 977
	}
}

SAF_remove_federation_generals = {
	remove_unit_leader = 970
	remove_unit_leader = 971
	remove_unit_leader = 972
	remove_unit_leader = 976
	remove_unit_leader = 977
	set_country_flag = Jan_C_Smuts_dead
	set_country_flag = Jan_Hendrik_Hofmeyr_dead
	set_country_flag = Leonard_Beyers_dead
}

SAF_add_republic_generals = {
	create_corps_commander = { #Auto-Generated
		name = "Dan Pienaar"
		portrait_path = "gfx/leaders/SAF/Portrait_SAF_Dan_Pienaar.tga"
		traits = {
			old_guard
			desert_fox
		}
		skill = 2
		id = 973
	}
	create_corps_commander = { #Auto-Generated
		name = "Hendrik Klopper"
		portrait_path = "gfx/leaders/SAF/Portrait_SAF_Hendrik_Klopper.tga"
		traits = {
			fortress_buster
		}
		skill = 2
		id = 974
	}
	create_corps_commander = { #Auto-Generated
		name = "Isaac Pierre de Villiers"
		portrait_path = "gfx/leaders/SAF/Portrait_SAF_Isaac_de_Villiers.tga"
		traits = {
			old_guard
		}
		skill = 1
		id = 975
	}
	create_corps_commander = { #Auto-Generated
		name = "Christiaan du Toit"
		portrait_path = "gfx/leaders/SAF/Portrait_SAF_Christiaan_du_Toit.tga"
		traits = {
			bearer_of_artillery
		}
		skill = 1
		id = 978
	}
	create_corps_commander = { #Auto-Generated
		name = "Christoffel Venter"
		portrait_path = "gfx/leaders/SAF/Portrait_SAF_Christoffel_Venter.tga"
		traits = {
			trait_engineer
		}
		skill = 1
		id = 979
	}
}

SAF_remove_republic_generals = {
	remove_unit_leader = 973
	remove_unit_leader = 974
	remove_unit_leader = 975
	remove_unit_leader = 978
	remove_unit_leader = 979
	set_country_flag = C_de_Weenburg_du_Toit_dead
	set_country_flag = JF_Naude_dead
	set_country_flag = Cornelis_van_Zuigenbrogge_dead
	set_country_flag = SP_Le_Roux_dead
}

SAF_return_volunteers = {
	if = {
		limit = { has_authoritarian_government = yes }
		if = {
			limit = { GER = { has_country_flag = SAF_sent_volunteers } }
			add_opinion_modifier = { target = GER modifier = SAF_aided_us }
		}
		if = {
			limit = {
				HOL = {
					OR = {
						has_country_flag = SAF_sent_volunteers
						has_country_flag = SAF_sent_many_volunteers
					}
				}
			}
			add_opinion_modifier = { target = HOL modifier = SAF_aided_us }
		}
		if = {
			limit = {
				MAF = {
					OR = {
						has_country_flag = SAF_sent_volunteers
						has_country_flag = SAF_sent_many_volunteers
					}
				}
			}
			add_opinion_modifier = { target = MAF modifier = SAF_aided_us }
		}
		if = {
			limit = { CAN = { has_country_flag = SAF_sent_volunteers } }
			add_opinion_modifier = { target = CAN modifier = SAF_aided_enemy }
		}
		if = {
			limit = { GBR = { has_country_flag = SAF_sent_volunteers } }
			add_opinion_modifier = { target = GBR modifier = SAF_aided_enemy }
		}
		if = {
			limit = { AST = { has_country_flag = SAF_sent_volunteers } }
			add_opinion_modifier = { target = AST modifier = SAF_aided_enemy }
		}
		if = {
			limit = { DEH = { has_country_flag = SAF_sent_volunteers } }
			add_opinion_modifier = { target = DEH modifier = SAF_aided_enemy }
		}
		else = {
			if = {
				limit = { GER = { has_country_flag = SAF_sent_volunteers } }
				add_opinion_modifier = { target = GER modifier = SAF_aided_enemy }
			}
			if = {
				limit = {
					HOL = {
						OR = {
							has_country_flag = SAF_sent_volunteers
							has_country_flag = SAF_sent_many_volunteers
						}
					}
				}
				add_opinion_modifier = { target = HOL modifier = SAF_aided_enemy }
			}
			if = {
				limit = {
					MAF = {
						OR = {
							has_country_flag = SAF_sent_volunteers
							has_country_flag = SAF_sent_many_volunteers
						}
					}
				}
				add_opinion_modifier = { target = MAF modifier = SAF_aided_enemy }
			}
			if = {
				limit = { CAN = { has_country_flag = SAF_sent_volunteers } }
				add_opinion_modifier = { target = CAN modifier = SAF_aided_us }
			}
			if = {
				limit = { GBR = { has_country_flag = SAF_sent_volunteers } }
				add_opinion_modifier = { target = GBR modifier = SAF_aided_us }
			}
			if = {
				limit = { AST = { has_country_flag = SAF_sent_volunteers } }
				add_opinion_modifier = { target = AST modifier = SAF_aided_us }
			}
			if = {
				limit = { DEH = { has_country_flag = SAF_sent_volunteers } }
				add_opinion_modifier = { target = DEH modifier = SAF_aided_us }
			}
		}
	}
	hidden_effect = {
		every_country = {
			limit = {
				OR = {
					has_country_flag = SAF_sent_volunteers
					has_country_flag = SAF_sent_many_volunteers
				}
			}
			country_event = { id = saf.71 days = 3 }
		}
	}
}
