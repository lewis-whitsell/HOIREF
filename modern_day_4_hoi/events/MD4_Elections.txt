add_namespace = MD4_election
add_namespace = western_win
add_namespace = emerging_win
add_namespace = salafist_win
add_namespace = non_alligned_win
add_namespace = nationalist_win
add_namespace = MD4_election_campaign
add_namespace = News_MD4_election

### Initial event, launches everything else
country_event = {
    id = MD4_election_campaign.0
	title = MD4_election_campaign.0.t
	desc = MD4_election_campaign.0.d
	picture = GFX_election_day
	
    is_triggered_only = yes
	
	immediate  = {
		display_election_campaign_status = yes
	}
		
	option = {
		name = MD4_election_campaign.0.a
		campaign_spending_effects = yes
		country_event = { id = MD4_election_campaign.1 days = 1 }
		hidden_effect = { 
			country_event = { id = MD4_election.0 days = 14 }
			if = {
				limit = {
					has_country_flag = {
						flag = approval_rating
						value < 50
					}
				}
				random_list = {
							35 = { }
							65 = { country_event = { id = MD4_election_campaign.8 days = 7 } }
				}	
			}
		}
	}
}

#Negative campaign against others
country_event = {
    id = MD4_election_campaign.1
	title = MD4_election_campaign.1.t
	desc = MD4_election_campaign.1.d
	picture = GFX_election_day
	
    is_triggered_only = yes
	
	immediate  = {
	}
	
	###attack own opposition###	
	option = {
		name = MD4_election_campaign.1.a
		ai_chance = { 
			factor = 15
			modifier = {
				factor = 0
					democratic < 30
			}
			modifier = {
				factor = 0.5			
				AND = {
					democratic > 29
					democratic < 40
				}
			}
			modifier = {
				factor = 5
					democratic > 50
			}
		}
		trigger = { has_government = democratic }
		if = {
			limit = {
				and = {
					has_country_flag = {
						flag = campaign_funding_count
						value > 1
					}
					has_country_flag = {
						flag = campaign_funding_count
						value < 5
					}
				}
			}
			relative_change_pos_2 = yes
			add_popularity = { ideology = democratic popularity = -0.01 }
		}
		if = {
			limit = {
				and = {
					has_country_flag = {
						flag = campaign_funding_count
						value > 4
					}
					has_country_flag = {
						flag = campaign_funding_count
						value < 8
					}
				}
			}
			relative_change_pos_4 = yes
			add_popularity = { ideology = democratic popularity = -0.02 }
		}
		if = {
			limit = {
				and = {
					has_country_flag = {
						flag = campaign_funding_count
						value > 7
					}
					has_country_flag = {
						flag = campaign_funding_count
						value < 11
					}
				}
			}
			relative_change_pos_8 = yes
			add_popularity = { ideology = democratic popularity = -0.04 }
		}
		if = {
			limit = {
				and = {
					has_country_flag = {
						flag = campaign_funding_count
						value > 10
					}
					has_country_flag = {
						flag = campaign_funding_count
						value < 15
					}
				}
			}
			relative_change_pos_12 = yes
			add_popularity = { ideology = democratic popularity = -0.06 }
		}
		if = {
			limit = {
				and = {
					has_country_flag = {
						flag = campaign_funding_count
						value > 14
					}
					has_country_flag = {
						flag = campaign_funding_count
						value < 17
					}
				}
			}
			relative_change_pos_16 = yes
			add_popularity = { ideology = democratic popularity = -0.08 }
		}
		random_list = {
			80 = { }
			20 = { country_event = { id = MD4_election_campaign.2 days = 8 } }
		}
	}
	
	option = {
		name = MD4_election_campaign.1.a
		ai_chance = { 
			factor = 15
			modifier = {
				factor = 0
					communism < 30
			}
			modifier = {
				factor = 0.5			
				AND = {
					communism > 29
					communism < 40
				}
			}
			modifier = {
				factor = 5
					communism > 50
			}
		}
		trigger = { has_government = communism }
		if = {
			limit = {
				and = {
					has_country_flag = {
						flag = campaign_funding_count
						value > 1
					}
					has_country_flag = {
						flag = campaign_funding_count
						value < 5
					}
				}
			}
			relative_change_pos_2 = yes
			add_popularity = { ideology = communism popularity = -0.01 }
		}
		if = {
			limit = {
				and = {
					has_country_flag = {
						flag = campaign_funding_count
						value > 4
					}
					has_country_flag = {
						flag = campaign_funding_count
						value < 8
					}
				}
			}
			relative_change_pos_4 = yes
			add_popularity = { ideology = communism popularity = -0.02 }
		}
		if = {
			limit = {
				and = {
					has_country_flag = {
						flag = campaign_funding_count
						value > 7
					}
					has_country_flag = {
						flag = campaign_funding_count
						value < 11
					}
				}
			}
			relative_change_pos_8 = yes
			add_popularity = { ideology = communism popularity = -0.04 }
		}
		if = {
			limit = {
				and = {
					has_country_flag = {
						flag = campaign_funding_count
						value > 10
					}
					has_country_flag = {
						flag = campaign_funding_count
						value < 15
					}
				}
			}
			relative_change_pos_12 = yes
			add_popularity = { ideology = communism popularity = -0.06 }
		}
		if = {
			limit = {
				and = {
					has_country_flag = {
						flag = campaign_funding_count
						value > 14
					}
					has_country_flag = {
						flag = campaign_funding_count
						value < 17
					}
				}
			}
			relative_change_pos_16 = yes
			add_popularity = { ideology = communism popularity = -0.08 }
		}
		random_list = {
			80 = { }
			20 = { country_event = { id = MD4_election_campaign.2 days = 8 } }
		}
	}
	
	option = {
		name = MD4_election_campaign.1.a
		ai_chance = { 
			factor = 15
			modifier = {
				factor = 0
					Nationalist < 30
			}
			modifier = {
				factor = 0.5			
				AND = {
					Nationalist > 29
					Nationalist < 40
				}
			}
			modifier = {
				factor = 5
					Nationalist > 50
			}
		}
		trigger = { has_government = Nationalist }
		if = {
			limit = {
				and = {
					has_country_flag = {
						flag = campaign_funding_count
						value > 1
					}
					has_country_flag = {
						flag = campaign_funding_count
						value < 5
					}
				}
			}
			relative_change_pos_2 = yes
			add_popularity = { ideology = Nationalist popularity = -0.01 }
		}
		if = {
			limit = {
				and = {
					has_country_flag = {
						flag = campaign_funding_count
						value > 4
					}
					has_country_flag = {
						flag = campaign_funding_count
						value < 8
					}
				}
			}
			relative_change_pos_4 = yes
			add_popularity = { ideology = Nationalist popularity = -0.02 }
		}
		if = {
			limit = {
				and = {
					has_country_flag = {
						flag = campaign_funding_count
						value > 7
					}
					has_country_flag = {
						flag = campaign_funding_count
						value < 11
					}
				}
			}
			relative_change_pos_8 = yes
			add_popularity = { ideology = Nationalist popularity = -0.04 }
		}
		if = {
			limit = {
				and = {
					has_country_flag = {
						flag = campaign_funding_count
						value > 10
					}
					has_country_flag = {
						flag = campaign_funding_count
						value < 15
					}
				}
			}
			relative_change_pos_12 = yes
			add_popularity = { ideology = Nationalist popularity = -0.06 }
		}
		if = {
			limit = {
				and = {
					has_country_flag = {
						flag = campaign_funding_count
						value > 14
					}
					has_country_flag = {
						flag = campaign_funding_count
						value < 17
					}
				}
			}
			relative_change_pos_16 = yes
			add_popularity = { ideology = Nationalist popularity = -0.08 }
		}
		random_list = {
			80 = { }
			20 = { country_event = { id = MD4_election_campaign.2 days = 8 } }
		}
	}
	
	option = {
		name = MD4_election_campaign.1.a
		ai_chance = { 
			factor = 15
			modifier = {
				factor = 0
					neutrality < 30
			}
			modifier = {
				factor = 0.5			
				AND = {
					neutrality > 29
					neutrality < 40
				}
			}
			modifier = {
				factor = 5
					neutrality > 50
			}
		}
		trigger = { has_government = neutrality }
		if = {
			limit = {
				and = {
					has_country_flag = {
						flag = campaign_funding_count
						value > 1
					}
					has_country_flag = {
						flag = campaign_funding_count
						value < 5
					}
				}
			}
			relative_change_pos_2 = yes
			add_popularity = { ideology = neutrality popularity = -0.01 }
		}
		if = {
			limit = {
				and = {
					has_country_flag = {
						flag = campaign_funding_count
						value > 4
					}
					has_country_flag = {
						flag = campaign_funding_count
						value < 8
					}
				}
			}
			relative_change_pos_4 = yes
			add_popularity = { ideology = neutrality popularity = -0.02 }
		}
		if = {
			limit = {
				and = {
					has_country_flag = {
						flag = campaign_funding_count
						value > 7
					}
					has_country_flag = {
						flag = campaign_funding_count
						value < 11
					}
				}
			}
			relative_change_pos_8 = yes
			add_popularity = { ideology = neutrality popularity = -0.04 }
		}
		if = {
			limit = {
				and = {
					has_country_flag = {
						flag = campaign_funding_count
						value > 10
					}
					has_country_flag = {
						flag = campaign_funding_count
						value < 15
					}
				}
			}
			relative_change_pos_12 = yes
			add_popularity = { ideology = neutrality popularity = -0.06 }
		}
		if = {
			limit = {
				and = {
					has_country_flag = {
						flag = campaign_funding_count
						value > 14
					}
					has_country_flag = {
						flag = campaign_funding_count
						value < 17
					}
				}
			}
			relative_change_pos_16 = yes
			add_popularity = { ideology = neutrality popularity = -0.08 }
		}
		random_list = {
			80 = { }
			20 = { country_event = { id = MD4_election_campaign.2 days = 8 } }
		}
	}
	
	option = {
		name = MD4_election_campaign.1.a
		ai_chance = { 
			factor = 15
			modifier = {
				factor = 0
					fascism < 30
			}
			modifier = {
				factor = 0.5			
				AND = {
					fascism > 29
					fascism < 40
				}
			}
			modifier = {
				factor = 5
					fascism > 50
			}
		}
		trigger = { has_government = fascism }
		if = {
			limit = {
				and = {
					has_country_flag = {
						flag = campaign_funding_count
						value > 1
					}
					has_country_flag = {
						flag = campaign_funding_count
						value < 5
					}
				}
			}
			relative_change_pos_2 = yes
			add_popularity = { ideology = fascism popularity = -0.01 }
		}
		if = {
			limit = {
				and = {
					has_country_flag = {
						flag = campaign_funding_count
						value > 4
					}
					has_country_flag = {
						flag = campaign_funding_count
						value < 8
					}
				}
			}
			relative_change_pos_4 = yes
			add_popularity = { ideology = fascism popularity = -0.02 }
		}
		if = {
			limit = {
				and = {
					has_country_flag = {
						flag = campaign_funding_count
						value > 7
					}
					has_country_flag = {
						flag = campaign_funding_count
						value < 11
					}
				}
			}
			relative_change_pos_8 = yes
			add_popularity = { ideology = fascism popularity = -0.04 }
		}
		if = {
			limit = {
				and = {
					has_country_flag = {
						flag = campaign_funding_count
						value > 10
					}
					has_country_flag = {
						flag = campaign_funding_count
						value < 15
					}
				}
			}
			relative_change_pos_12 = yes
			add_popularity = { ideology = fascism popularity = -0.06 }
		}
		if = {
			limit = {
				and = {
					has_country_flag = {
						flag = campaign_funding_count
						value > 14
					}
					has_country_flag = {
						flag = campaign_funding_count
						value < 17
					}
				}
			}
			relative_change_pos_16 = yes
			add_popularity = { ideology = fascism popularity = -0.08 }
		}
		random_list = {
			80 = { }
			20 = { country_event = { id = MD4_election_campaign.2 days = 8 } }
		}
	}
	
	### Attack the Salafists ###
	option = {
		name = MD4_election_campaign.1.b
		ai_chance = { factor = 30 }
		trigger = { 
			NOT = { has_government = fascism }
			fascism > 0.22
		}
		if = {
			limit = {
				and = {
					has_country_flag = {
						flag = campaign_funding_count
						value > 1
					}
					has_country_flag = {
						flag = campaign_funding_count
						value < 5
					}
				}
			}
			add_popularity = { ideology = fascism popularity = -0.02 }
		}
		if = {
			limit = {
				and = {
					has_country_flag = {
						flag = campaign_funding_count
						value > 4
					}
					has_country_flag = {
						flag = campaign_funding_count
						value < 8
					}
				}
			}
			add_popularity = { ideology = fascism popularity = -0.04 }
		}
		if = {
			limit = {
				and = {
					has_country_flag = {
						flag = campaign_funding_count
						value > 7
					}
					has_country_flag = {
						flag = campaign_funding_count
						value < 11
					}
				}
			}
			add_popularity = { ideology = fascism popularity = -0.08 }
		}
		if = {
			limit = {
				and = {
					has_country_flag = {
						flag = campaign_funding_count
						value > 10
					}
					has_country_flag = {
						flag = campaign_funding_count
						value < 15
					}
				}
			}
			add_popularity = { ideology = fascism popularity = -0.12 }
		}
		if = {
			limit = {
				and = {
					has_country_flag = {
						flag = campaign_funding_count
						value > 14
					}
					has_country_flag = {
						flag = campaign_funding_count
						value < 17
					}
				}
			}
			add_popularity = { ideology = fascism popularity = -0.16 }
		}
		random_list = {
			80 = { }
			20 = { country_event = { id = MD4_election_campaign.3 days = 8 } }
		}
	}
	
	### Attack the Nationalist ###
	option = {
		name = MD4_election_campaign.1.c
		ai_chance = { factor = 30 }
		trigger = { 
			NOT = { has_government = Nationalist }
			Nationalist > 0.22
		}
		if = {
			limit = {
				and = {
					has_country_flag = {
						flag = campaign_funding_count
						value > 1
					}
					has_country_flag = {
						flag = campaign_funding_count
						value < 5
					}
				}
			}
			add_popularity = { ideology = Nationalist popularity = -0.02 }
		}
		if = {
			limit = {
				and = {
					has_country_flag = {
						flag = campaign_funding_count
						value > 4
					}
					has_country_flag = {
						flag = campaign_funding_count
						value < 8
					}
				}
			}
			add_popularity = { ideology = Nationalist popularity = -0.04 }
		}
		if = {
			limit = {
				and = {
					has_country_flag = {
						flag = campaign_funding_count
						value > 7
					}
					has_country_flag = {
						flag = campaign_funding_count
						value < 11
					}
				}
			}
			add_popularity = { ideology = Nationalist popularity = -0.08 }
		}
		if = {
			limit = {
				and = {
					has_country_flag = {
						flag = campaign_funding_count
						value > 10
					}
					has_country_flag = {
						flag = campaign_funding_count
						value < 15
					}
				}
			}
			add_popularity = { ideology = Nationalist popularity = -0.12 }
		}
		if = {
			limit = {
				and = {
					has_country_flag = {
						flag = campaign_funding_count
						value > 14
					}
					has_country_flag = {
						flag = campaign_funding_count
						value < 17
					}
				}
			}
			add_popularity = { ideology = Nationalist popularity = -0.16 }
		}
		random_list = {
			80 = { }
			20 = { country_event = { id = MD4_election_campaign.4 days = 8 } }
		}
	}
	
	### Attack the Non Alligned's ###
	option = {
		name = MD4_election_campaign.1.e
		ai_chance = { factor = 30 }
		trigger = { 
			NOT = { has_government = neutrality }
			neutrality > 0.22
		}
		if = {
			limit = {
				and = {
					has_country_flag = {
						flag = campaign_funding_count
						value > 1
					}
					has_country_flag = {
						flag = campaign_funding_count
						value < 5
					}
				}
			}
			add_popularity = { ideology = neutrality popularity = -0.02 }
		}
		if = {
			limit = {
				and = {
					has_country_flag = {
						flag = campaign_funding_count
						value > 4
					}
					has_country_flag = {
						flag = campaign_funding_count
						value < 8
					}
				}
			}
			add_popularity = { ideology = neutrality popularity = -0.04 }
		}
		if = {
			limit = {
				and = {
					has_country_flag = {
						flag = campaign_funding_count
						value > 7
					}
					has_country_flag = {
						flag = campaign_funding_count
						value < 11
					}
				}
			}
			add_popularity = { ideology = neutrality popularity = -0.08 }
		}
		if = {
			limit = {
				and = {
					has_country_flag = {
						flag = campaign_funding_count
						value > 10
					}
					has_country_flag = {
						flag = campaign_funding_count
						value < 15
					}
				}
			}
			add_popularity = { ideology = neutrality popularity = -0.12 }
		}
		if = {
			limit = {
				and = {
					has_country_flag = {
						flag = campaign_funding_count
						value > 14
					}
					has_country_flag = {
						flag = campaign_funding_count
						value < 17
					}
				}
			}
			add_popularity = { ideology = neutrality popularity = -0.16 }
		}
		random_list = {
			80 = { }
			20 = { country_event = { id = MD4_election_campaign.5 days = 8 } }
		}
	}
	
	### Attack the Emerging ###
	option = {
		name = MD4_election_campaign.1.f
		ai_chance = { factor = 30 }
		trigger = { 
			NOT = { has_government = communism }
			communism > 0.22
		}
		if = {
			limit = {
				and = {
					has_country_flag = {
						flag = campaign_funding_count
						value > 1
					}
					has_country_flag = {
						flag = campaign_funding_count
						value < 5
					}
				}
			}
			add_popularity = { ideology = communism popularity = -0.02 }
		}
		if = {
			limit = {
				and = {
					has_country_flag = {
						flag = campaign_funding_count
						value > 4
					}
					has_country_flag = {
						flag = campaign_funding_count
						value < 8
					}
				}
			}
			add_popularity = { ideology = communism popularity = -0.04 }
		}
		if = {
			limit = {
				and = {
					has_country_flag = {
						flag = campaign_funding_count
						value > 7
					}
					has_country_flag = {
						flag = campaign_funding_count
						value < 11
					}
				}
			}
			add_popularity = { ideology = communism popularity = -0.08 }
		}
		if = {
			limit = {
				and = {
					has_country_flag = {
						flag = campaign_funding_count
						value > 10
					}
					has_country_flag = {
						flag = campaign_funding_count
						value < 15
					}
				}
			}
			add_popularity = { ideology = communism popularity = -0.12 }
		}
		if = {
			limit = {
				and = {
					has_country_flag = {
						flag = campaign_funding_count
						value > 14
					}
					has_country_flag = {
						flag = campaign_funding_count
						value < 17
					}
				}
			}
			add_popularity = { ideology = communism popularity = -0.16 }
		}
		random_list = {
			80 = { }
			20 = { country_event = { id = MD4_election_campaign.6 days = 8 } }
		}
	}
	### Attack the Western ###
	option = {
		name = MD4_election_campaign.1.g
		ai_chance = { factor = 30 }
		trigger = { 
			NOT = { has_government = democratic }
			democratic > 0.22
		}
		if = {
			limit = {
				and = {
					has_country_flag = {
						flag = campaign_funding_count
						value > 1
					}
					has_country_flag = {
						flag = campaign_funding_count
						value < 5
					}
				}
			}
			add_popularity = { ideology = democratic popularity = -0.02 }
		}
		if = {
			limit = {
				and = {
					has_country_flag = {
						flag = campaign_funding_count
						value > 4
					}
					has_country_flag = {
						flag = campaign_funding_count
						value < 8
					}
				}
			}
			add_popularity = { ideology = democratic popularity = -0.04 }
		}
		if = {
			limit = {
				and = {
					has_country_flag = {
						flag = campaign_funding_count
						value > 7
					}
					has_country_flag = {
						flag = campaign_funding_count
						value < 11
					}
				}
			}
			add_popularity = { ideology = democratic popularity = -0.08 }
		}
		if = {
			limit = {
				and = {
					has_country_flag = {
						flag = campaign_funding_count
						value > 10
					}
					has_country_flag = {
						flag = campaign_funding_count
						value < 15
					}
				}
			}
			add_popularity = { ideology = democratic popularity = -0.12 }
		}
		if = {
			limit = {
				and = {
					has_country_flag = {
						flag = campaign_funding_count
						value > 14
					}
					has_country_flag = {
						flag = campaign_funding_count
						value < 17
					}
				}
			}
			add_popularity = { ideology = democratic popularity = -0.16 }
		}
		random_list = {
			80 = { }
			20 = { country_event = { id = MD4_election_campaign.7 days = 8 } }
		}
	}
}

###negative campaigning backfires###
country_event = {
    id = MD4_election_campaign.2
	title = MD4_election_campaign.2.t
	desc = MD4_election_campaign.2.d
	picture = GFX_election_rally
	
    is_triggered_only = yes
	
	immediate  = {
	}
		
	option = {
		name = MD4_election_campaign.2.a
		if = {
			limit = {
				and = {
					has_country_flag = {
						flag = campaign_funding_count
						value > 1
					}
					has_country_flag = {
						flag = campaign_funding_count
						value < 5
					}
				}
			}
			relative_change_neg_2 = yes
		}
		if = {
			limit = {
				and = {
					has_country_flag = {
						flag = campaign_funding_count
						value > 4
					}
					has_country_flag = {
						flag = campaign_funding_count
						value < 8
					}
				}
			}
			relative_change_neg_4 = yes
		}
		if = {
			limit = {
				and = {
					has_country_flag = {
						flag = campaign_funding_count
						value > 7
					}
					has_country_flag = {
						flag = campaign_funding_count
						value < 11
					}
				}
			}
			relative_change_neg_8 = yes
		}
		if = {
			limit = {
				and = {
					has_country_flag = {
						flag = campaign_funding_count
						value > 10
					}
					has_country_flag = {
						flag = campaign_funding_count
						value < 15
					}
				}
			}
			relative_change_neg_12 = yes
		}
		if = {
			limit = {
				and = {
					has_country_flag = {
						flag = campaign_funding_count
						value > 14
					}
					has_country_flag = {
						flag = campaign_funding_count
						value < 17
					}
				}
			}
			relative_change_neg_16 = yes
		}
	}
}

###negative campaigning backfires###
country_event = {
    id = MD4_election_campaign.3
	title = MD4_election_campaign.3.t
	desc = MD4_election_campaign.3.d
	picture = GFX_election_rally
	
    is_triggered_only = yes
	
	immediate  = {
	}
	
	option = {
		name = MD4_election_campaign.3.a	
		if = {
			limit = {
				and = {
					has_country_flag = {
						flag = campaign_funding_count
						value > 1
					}
					has_country_flag = {
						flag = campaign_funding_count
						value < 5
					}
				}
			}
			add_popularity = { ideology = fascism popularity = 0.02 }
			relative_change_neg_4 = yes
		}
		if = {
			limit = {
				and = {
					has_country_flag = {
						flag = campaign_funding_count
						value > 4
					}
					has_country_flag = {
						flag = campaign_funding_count
						value < 8
					}
				}
			}
			add_popularity = { ideology = fascism popularity = 0.04 }
			relative_change_neg_4 = yes
		}
		if = {
			limit = {
				and = {
					has_country_flag = {
						flag = campaign_funding_count
						value > 7
					}
					has_country_flag = {
						flag = campaign_funding_count
						value < 11
					}
				}
			}
			add_popularity = { ideology = fascism popularity = 0.08 }
			relative_change_neg_4 = yes
		}
		if = {
			limit = {
				and = {
					has_country_flag = {
						flag = campaign_funding_count
						value > 10
					}
					has_country_flag = {
						flag = campaign_funding_count
						value < 15
					}
				}
			}
			add_popularity = { ideology = fascism popularity = 0.12 }
			relative_change_neg_4 = yes
		}
		if = {
			limit = {
				and = {
					has_country_flag = {
						flag = campaign_funding_count
						value > 14
					}
					has_country_flag = {
						flag = campaign_funding_count
						value < 17
					}
				}
			}
			add_popularity = { ideology = fascism popularity = 0.16 }
			relative_change_neg_4 = yes
		}
	}
}

###negative campaigning backfires###
country_event = {
    id = MD4_election_campaign.4
	title = MD4_election_campaign.4.t
	desc = MD4_election_campaign.4.d
	picture = GFX_election_rally
	
    is_triggered_only = yes
	
	immediate  = {
	}
	
	option = {
		name = MD4_election_campaign.4.a	
		if = {
			limit = {
				and = {
					has_country_flag = {
						flag = campaign_funding_count
						value > 1
					}
					has_country_flag = {
						flag = campaign_funding_count
						value < 5
					}
				}
			}
			add_popularity = { ideology = Nationalist popularity = 0.02 }
			relative_change_neg_4 = yes
		}
		if = {
			limit = {
				and = {
					has_country_flag = {
						flag = campaign_funding_count
						value > 4
					}
					has_country_flag = {
						flag = campaign_funding_count
						value < 8
					}
				}
			}
			add_popularity = { ideology = Nationalist popularity = 0.04 }
			relative_change_neg_4 = yes
		}
		if = {
			limit = {
				and = {
					has_country_flag = {
						flag = campaign_funding_count
						value > 7
					}
					has_country_flag = {
						flag = campaign_funding_count
						value < 11
					}
				}
			}
			add_popularity = { ideology = Nationalist popularity = 0.08 }
			relative_change_neg_4 = yes
		}
		if = {
			limit = {
				and = {
					has_country_flag = {
						flag = campaign_funding_count
						value > 10
					}
					has_country_flag = {
						flag = campaign_funding_count
						value < 15
					}
				}
			}
			add_popularity = { ideology = Nationalist popularity = 0.12 }
			relative_change_neg_4 = yes
		}
		if = {
			limit = {
				and = {
					has_country_flag = {
						flag = campaign_funding_count
						value > 14
					}
					has_country_flag = {
						flag = campaign_funding_count
						value < 17
					}
				}
			}
			add_popularity = { ideology = Nationalist popularity = 0.16 }
			relative_change_neg_4 = yes
		}
	}
}

###negative campaigning backfires###
country_event = {
    id = MD4_election_campaign.5
	title = MD4_election_campaign.5.t
	desc = MD4_election_campaign.5.d
	picture = GFX_election_rally
	
    is_triggered_only = yes
	
	immediate  = {
	}
	
	option = {
		name = MD4_election_campaign.5.a	
		if = {
			limit = {
				and = {
					has_country_flag = {
						flag = campaign_funding_count
						value > 1
					}
					has_country_flag = {
						flag = campaign_funding_count
						value < 5
					}
				}
			}
			add_popularity = { ideology = neutrality popularity = 0.02 }
			relative_change_neg_4 = yes
		}
		if = {
			limit = {
				and = {
					has_country_flag = {
						flag = campaign_funding_count
						value > 4
					}
					has_country_flag = {
						flag = campaign_funding_count
						value < 8
					}
				}
			}
			add_popularity = { ideology = neutrality popularity = 0.04 }
			relative_change_neg_4 = yes
		}
		if = {
			limit = {
				and = {
					has_country_flag = {
						flag = campaign_funding_count
						value > 7
					}
					has_country_flag = {
						flag = campaign_funding_count
						value < 11
					}
				}
			}
			add_popularity = { ideology = neutrality popularity = 0.08 }
			relative_change_neg_4 = yes
		}
		if = {
			limit = {
				and = {
					has_country_flag = {
						flag = campaign_funding_count
						value > 10
					}
					has_country_flag = {
						flag = campaign_funding_count
						value < 15
					}
				}
			}
			add_popularity = { ideology = neutrality popularity = 0.12 }
			relative_change_neg_4 = yes
		}
		if = {
			limit = {
				and = {
					has_country_flag = {
						flag = campaign_funding_count
						value > 14
					}
					has_country_flag = {
						flag = campaign_funding_count
						value < 17
					}
				}
			}
			add_popularity = { ideology = neutrality popularity = 0.16 }
			relative_change_neg_4 = yes
		}
	}
}


###negative campaigning backfires###
country_event = {
    id = MD4_election_campaign.6
	title = MD4_election_campaign.6.t
	desc = MD4_election_campaign.6.d
	picture = GFX_election_rally
	
    is_triggered_only = yes
	
	immediate  = {
	}
	
	option = {
		name = MD4_election_campaign.6.a	
		if = {
			limit = {
				and = {
					has_country_flag = {
						flag = campaign_funding_count
						value > 1
					}
					has_country_flag = {
						flag = campaign_funding_count
						value < 5
					}
				}
			}
			add_popularity = { ideology = communism popularity = 0.02 }
			relative_change_neg_4 = yes
		}
		if = {
			limit = {
				and = {
					has_country_flag = {
						flag = campaign_funding_count
						value > 4
					}
					has_country_flag = {
						flag = campaign_funding_count
						value < 8
					}
				}
			}
			add_popularity = { ideology = communism popularity = 0.04 }
			relative_change_neg_4 = yes
		}
		if = {
			limit = {
				and = {
					has_country_flag = {
						flag = campaign_funding_count
						value > 7
					}
					has_country_flag = {
						flag = campaign_funding_count
						value < 11
					}
				}
			}
			add_popularity = { ideology = communism popularity = 0.08 }
			relative_change_neg_4 = yes
		}
		if = {
			limit = {
				and = {
					has_country_flag = {
						flag = campaign_funding_count
						value > 10
					}
					has_country_flag = {
						flag = campaign_funding_count
						value < 15
					}
				}
			}
			add_popularity = { ideology = communism popularity = 0.12 }
			relative_change_neg_4 = yes
		}
		if = {
			limit = {
				and = {
					has_country_flag = {
						flag = campaign_funding_count
						value > 14
					}
					has_country_flag = {
						flag = campaign_funding_count
						value < 17
					}
				}
			}
			add_popularity = { ideology = communism popularity = 0.16 }
			relative_change_neg_4 = yes
		}
	}
}

###Invite controversial speaker on the campaign trail###
country_event = {
    id = MD4_election_campaign.8
	title = MD4_election_campaign.8.t
	desc = MD4_election_campaign.8.d
	picture = GFX_election_rally
	
    is_triggered_only = yes
	
	immediate  = {
	}
	
	option = {
		name = MD4_election_campaign.8.a
		random_list = {
			50 = { news_event = { id = MD4_election_campaign.9 days = 2 } }
			50 = { news_event = { id = MD4_election_campaign.10 days = 2 } }
		}
	}
	option = {
		name = MD4_election_campaign.8.b
	}
}

###Invite controversial speaker on the campaign trail### Success!!!
news_event = {
    id = MD4_election_campaign.9
	title = MD4_election_campaign.9.t
	desc = MD4_election_campaign.9.d
	picture = GFX_news_election_rally
	
    is_triggered_only = yes
	
	immediate  = {
	}
	
	option = {
		name = MD4_election_campaign.9.a
		relative_change_pos_6 = yes
	}
}

###Invite controversial speaker on the campaign trail### Catastrophe!!!
news_event = {
    id = MD4_election_campaign.10
	title = MD4_election_campaign.10.t
	desc = MD4_election_campaign.10.d
	picture = GFX_news_election_rally
	
    is_triggered_only = yes
	
	immediate  = {
	}
	
	option = {
		name = MD4_election_campaign.10.a
		relative_change_neg_6 = yes
	}
}

country_event = {
    id = MD4_election.0

	hidden = yes
    is_triggered_only = yes
	
	trigger = {
		NOT = { 
			OR = {
				tag = BRA
				tag = USA
			}
		}
	}
	
	immediate  = {
		determine_largest_outlook = yes
		clr_country_flag = campaign_funding_count
	}
		
	option = {
	}
}

country_event = {
    id = western_win.0
	title = western_win.0.t
	desc = western_win.0.d
	picture = GFX_election_day
	
    is_triggered_only = yes
	
	immediate  = {
		
	}
		
	option = {
		name = western_win.0.a
		ai_chance = { factor = 100 }
		trigger = { has_government = democratic }
		hidden_effect = { country_event = { id = MD4_election.1 } }
	}
	option = {
		name = western_win.0.b
		ai_chance = { factor = 80 }
		trigger = { NOT = { has_government = democratic } }
		retire_country_leader = yes
		set_country_flag = { flag = approval_rating value = 50 }
		reset_all_internal_faction_opinions = yes
		set_politics = {
					ruling_party = democratic
				}
	}
	option = {
		name = western_win.0.c
		ai_chance = { factor = 20 }
		trigger = { NOT = { has_government = democratic } }
		increase_corruption = yes
		add_popularity = {
		ideology = democratic
		popularity = 0.10
		}
		country_event = { id = MD4_election.1 }
	}
}

country_event = {
    id = emerging_win.0
	title = emerging_win.0.t
	desc = emerging_win.0.d
	picture = GFX_election_day

    is_triggered_only = yes
	
	immediate  = {
		
	}
		
	option = {
		name = emerging_win.0.a
		ai_chance = { factor = 100 }
		trigger = { has_government = communism }
		hidden_effect = { country_event = { id = MD4_election.1 } }
	}
	option = {
		name = emerging_win.0.b
		ai_chance = { factor = 80 }
		trigger = { NOT = { has_government = communism } }
		retire_country_leader = yes
		set_country_flag = { flag = approval_rating value = 50 }
		reset_all_internal_faction_opinions = yes
		set_politics = {
					ruling_party = communism
				}
	}
	option = {
		name = emerging_win.0.c
		ai_chance = { factor = 20 }
		trigger = { NOT = { has_government = communism } }
		increase_corruption = yes
		add_popularity = {
		ideology = communism
		popularity = 0.10
		}
		country_event = { id = MD4_election.1 }
	}
}

country_event = {
    id = salafist_win.0
	title = salafist_win.0.t
	desc = salafist_win.0.d
	picture = GFX_election_day

    is_triggered_only = yes
	
	immediate  = {
		
	}
		
	option = {
		name = salafist_win.0.a
		ai_chance = { factor = 100 }
		trigger = { has_government = fascism }
		hidden_effect = { country_event = { id = MD4_election.1 } }
	}
	option = {
		name = salafist_win.0.b
		ai_chance = { factor = 0 }
		trigger = { NOT = { has_government = fascism } }
		retire_country_leader = yes
		set_country_flag = { flag = approval_rating value = 50 }
		reset_all_internal_faction_opinions = yes
		set_politics = {
					ruling_party = fascism
					elections_allowed = no
				}
	}
	option = {
		name = salafist_win.0.c
		ai_chance = { factor = 100 }
		trigger = { NOT = { has_government = fascism } }
		increase_corruption = yes
		add_popularity = {
		ideology = fascism
		popularity = 0.10
		}
		country_event = { id = MD4_election.1 }
	}
}

country_event = {
    id = non_alligned_win.0
	title = non_alligned_win.0.t
	desc = non_alligned_win.0.d
	picture = GFX_election_day

    is_triggered_only = yes
	
	immediate  = {
		
	}
		
	option = {
		name = non_alligned_win.0.a
		ai_chance = { factor = 100 }
		trigger = { has_government = neutrality }
		hidden_effect = { country_event = { id = MD4_election.1 } }
	}
	option = {
		name = non_alligned_win.0.b
		ai_chance = { factor = 80 }
		trigger = { NOT = { has_government = neutrality } }
		retire_country_leader = yes
		set_country_flag = { flag = approval_rating value = 50 }
		reset_all_internal_faction_opinions = yes
		set_politics = {
					ruling_party = neutrality
				}
	}
	option = {
		name = non_alligned_win.0.c
		ai_chance = { factor = 20 }
		trigger = { NOT = { has_government = neutrality } }
		increase_corruption = yes
		add_popularity = {
		ideology = neutrality
		popularity = 0.10
		}
		country_event = { id = MD4_election.1 }
	}
}

country_event = {
    id = nationalist_win.0
	title = nationalist_win.0.t
	desc = nationalist_win.0.d
	picture = GFX_election_day

    is_triggered_only = yes
	
	immediate  = {
		
	}
		
	option = {
		name = nationalist_win.0.a
		ai_chance = { factor = 100 }
		trigger = { has_government = Nationalist }
		hidden_effect = { country_event = { id = MD4_election.1 } }
	}
	option = {
		name = nationalist_win.0.b
		ai_chance = { factor = 80 }
		trigger = { NOT = { has_government = Nationalist } }
		retire_country_leader = yes
		set_country_flag = { flag = approval_rating value = 50 }
		reset_all_internal_faction_opinions = yes
		set_politics = {
					ruling_party = Nationalist
				}
	}
	option = {
		name = nationalist_win.0.c
		ai_chance = { factor = 20 }
		trigger = { NOT = { has_government = Nationalist } }
		increase_corruption = yes
		add_popularity = {
		ideology = Nationalist
		popularity = 0.10
		}
		country_event = { id = MD4_election.1 }
	}
}

#forming gov setup event
country_event = {
    id = MD4_election.1

	hidden = yes
    is_triggered_only = yes
	
	immediate  = {
		if = {
			limit = { 
				has_country_flag = {
					flag = approval_rating
					value > 50
				}
			}
			country_event = { days = 2 id = MD4_election.2 } #Won
			else = {
				if = {
					limit = {
						and = {
							has_country_flag = {
								flag = approval_rating
								value > 49
							}
							has_country_flag = {
								flag = approval_rating
								value < 51
							}
						}
					}
					random_list = {
								50 = {
								country_event = { days = 2 id = MD4_election.2 }
								}
								50 = {
								country_event = { days = 2 id = MD4_election.3 } #narrow loss
								}
					}
					else = {
						country_event = { days = 2 id = MD4_election.4 } #lost!
					}
				}
			}
		}
	}
		
	option = {
	}
}

### Winning! ###
country_event = {
    id = MD4_election.2
	title = MD4_election.2.t
	desc = MD4_election.2.d
	picture = GFX_election_rally
	
    is_triggered_only = yes
	
	immediate  = { }
		
	option = {
		name = MD4_election.2.a
		add_political_power = 150
		hidden_effect = { news_event = { days = 1 id = News_MD4_election.0 } }
		if = {
			limit = {
				is_North_America = yes
				is_major = no
			}
			every_country = {
				limit = { is_North_America = yes }
				news_event = {  days = 1 id = News_MD4_election.0 }
			}
		}
		if = {
			limit = {
				is_South_America = yes
				is_major = no
			}
			every_country = {
				limit = { is_South_America = yes }
				news_event = {  days = 1 id = News_MD4_election.0 }
			}
		}
		if = {
			limit = {
				is_Middle_East = yes
				is_major = no
			}
			every_country = {
				limit = { is_Middle_East = yes }
				news_event = {  days = 1 id = News_MD4_election.0 } 
			}
		}
		if = {
			limit = {
				is_african_nation = yes
				is_major = no
			}
			every_country = {
				limit = { is_african_nation = yes }
				news_event = {  days = 1 id = News_MD4_election.0 } 
			}
		}
		if = {
			limit = {
				 is_european_nation = yes
				is_major = no
			}
			every_country = {
				limit = { is_european_nation = yes }
				news_event = {  days = 1 id = News_MD4_election.0 } 
			}
		}
		if = {
			limit = {
				is_asian_nation = yes
				is_major = no
			}
			every_country = {
				limit = { is_asian_nation = yes }
				news_event = {  days = 1 id = News_MD4_election.0 } 
			}
		}
		if = {
			limit = {
				is_oceania_nation = yes
				is_major = no
			}
			every_country = {
				limit = { is_oceania_nation = yes }
				news_event = {  days = 1 id = News_MD4_election.0 } 
			}
		}
		if = {
			limit = {
				is_major = yes
			}
			every_country = {
				news_event = {  days = 1 id = News_MD4_election.0 } 
			}
		}
		
	}
}

### Narrow loss! ###
country_event = {
    id = MD4_election.3
	title = MD4_election.3.t
	desc = MD4_election.3.d
	picture = GFX_election_rally
	
    is_triggered_only = yes
	
	immediate  = { }
		
	option = {
		name = MD4_election.3.a
		ai_chance = { factor = 48 }
		retire_country_leader = yes
		set_country_flag = { flag = approval_rating value = 50 }
		approval_rating_update = yes
		reset_all_internal_faction_opinions = yes
		hidden_effect = { news_event = { days = 1 id = News_MD4_election.1 } }
		if = {
			limit = {
				is_North_America = yes
				is_major = no
			}
			every_country = {
				limit = { is_North_America = yes }
				news_event = {  days = 1 id = News_MD4_election.1 } 
			}
		}
		if = {
			limit = {
				is_South_America = yes
				is_major = no
			}
			every_country = {
				limit = { is_South_America = yes }
				news_event = {  days = 1 id = News_MD4_election.1 } 
			}
		}
		if = {
			limit = {
				is_Middle_East = yes
				is_major = no
			}
			every_country = {
				limit = { is_Middle_East = yes }
				news_event = {  days = 1 id = News_MD4_election.1 } 
			}
		}
		if = {
			limit = {
				is_african_nation = yes
				is_major = no
			}
			every_country = {
				limit = { is_african_nation = yes }
				news_event = {  days = 1 id = News_MD4_election.1 } 
			}
		}
		if = {
			limit = {
				 is_european_nation = yes
				is_major = no
			}
			every_country = {
				limit = { is_european_nation = yes }
				news_event = {  days = 1 id = News_MD4_election.1 } 
			}
		}
		if = {
			limit = {
				is_asian_nation = yes
				is_major = no
			}
			every_country = {
				limit = { is_asian_nation = yes }
				news_event = {  days = 1 id = News_MD4_election.1 } 
			}
		}
		if = {
			limit = {
				is_oceania_nation = yes
				is_major = no
			}
			every_country = {
				limit = { is_oceania_nation = yes }
				news_event = {  days = 1 id = News_MD4_election.1 } 
			}
		}
		if = {
			limit = {
				is_major = yes
			}
			every_country = {
				news_event = {  days = 1 id = News_MD4_election.1 } 
			}
		}
		
	}
	option = {
		name = MD4_election.3.b
		ai_chance = { factor = 50 }
		add_political_power = -50
		random_list = {
					40 = {
					country_event = { days = 3 id = MD4_election.2 }
					}
					60 = {
					country_event = { days = 3 id = MD4_election.4 } #loss!
					}
		}
	}
	option = {
		name = MD4_election.3.c
		ai_chance = { factor = 2 }
		add_political_power = -50
		relative_change_neg_10 = yes
			hidden_effect = { news_event = { days = 1 id = News_MD4_election.3 } }
		if = {
			limit = {
				is_North_America = yes
				is_major = no
			}
			every_country = {
				limit = { is_North_America = yes }
				news_event = {  days = 1 id = News_MD4_election.3 } 
			}
		}
		if = {
			limit = {
				is_South_America = yes
				is_major = no
			}
			every_country = {
				limit = { is_South_America = yes }
				news_event = {  days = 1 id = News_MD4_election.3 } 
			}
		}
		if = {
			limit = {
				is_Middle_East = yes
				is_major = no
			}
			every_country = {
				limit = { is_Middle_East = yes }
				news_event = {  days = 1 id = News_MD4_election.3 } 
			}
		}
		if = {
			limit = {
				is_african_nation = yes
				is_major = no
			}
			every_country = {
				limit = { is_african_nation = yes }
				news_event = {  days = 1 id = News_MD4_election.3 } 
			}
		}
		if = {
			limit = {
				 is_european_nation = yes
				is_major = no
			}
			every_country = {
				limit = { is_european_nation = yes }
				news_event = {  days = 1 id = News_MD4_election.3 } 
			}
		}
		if = {
			limit = {
				is_asian_nation = yes
				is_major = no
			}
			every_country = {
				limit = { is_asian_nation = yes }
				news_event = {  days = 1 id = News_MD4_election.3 } 
			}
		}
		if = {
			limit = {
				is_oceania_nation = yes
				is_major = no
			}
			every_country = {
				limit = { is_oceania_nation = yes }
				news_event = {  days = 1 id = News_MD4_election.3 } 
			}
		}
		if = {
			limit = {
				is_major = yes
			}
			every_country = {
				news_event = {  days = 1 id = News_MD4_election.3 } 
			}
		}
		
	}
}

### Election loss! ###
country_event = {
    id = MD4_election.4
	title = MD4_election.4.t
	desc = MD4_election.4.d
	picture = GFX_election_hyperthink
	
    is_triggered_only = yes
	
	immediate  = { }
		
	option = {
		name = MD4_election.4.a
		ai_chance = { factor = 99 }
		retire_country_leader = yes
		set_country_flag = { flag = approval_rating value = 50 }
		approval_rating_update = yes
		reset_all_internal_faction_opinions = yes
		hidden_effect = { news_event = { days = 1 id = News_MD4_election.1 } }
		if = {
			limit = {
				is_North_America = yes
				is_major = no
			}
			every_country = {
				limit = { is_North_America = yes }
				news_event = {  days = 1 id = News_MD4_election.1 } 
			}
		}
		if = {
			limit = {
				is_South_America = yes
				is_major = no
			}
			every_country = {
				limit = { is_South_America = yes }
				news_event = {  days = 1 id = News_MD4_election.1 } 
			}
		}
		if = {
			limit = {
				is_Middle_East = yes
				is_major = no
			}
			every_country = {
				limit = { is_Middle_East = yes }
				news_event = {  days = 1 id = News_MD4_election.1 } 
			}
		}
		if = {
			limit = {
				is_african_nation = yes
				is_major = no
			}
			every_country = {
				limit = { is_african_nation = yes }
				news_event = {  days = 1 id = News_MD4_election.1 } 
			}
		}
		if = {
			limit = {
				 is_european_nation = yes
				is_major = no
			}
			every_country = {
				limit = { is_european_nation = yes }
				news_event = {  days = 1 id = News_MD4_election.1 } 
			}
		}
		if = {
			limit = {
				is_asian_nation = yes
				is_major = no
			}
			every_country = {
				limit = { is_asian_nation = yes }
				news_event = {  days = 1 id = News_MD4_election.1 } 
			}
		}
		if = {
			limit = {
				is_oceania_nation = yes
				is_major = no
			}
			every_country = {
				limit = { is_oceania_nation = yes }
				news_event = {  days = 1 id = News_MD4_election.1 } 
			}
		}
		if = {
			limit = {
				is_major = yes
			}
			every_country = {
				news_event = {  days = 1 id = News_MD4_election.1 } 
			}
		}
	}
	option = {
		name = MD4_election.4.b
		ai_chance = { factor = 1 }
		relative_change_neg_20 = yes
		hidden_effect = { news_event = { days = 1 id = News_MD4_election.2 } }
		if = {
			limit = {
				is_North_America = yes
				is_major = no
			}
			every_country = {
				limit = { is_North_America = yes }
				news_event = {  days = 1 id = News_MD4_election.2 } 
			}
		}
		if = {
			limit = {
				is_South_America = yes
				is_major = no
			}
			every_country = {
				limit = { is_South_America = yes }
				news_event = {  days = 1 id = News_MD4_election.2 } 
			}
		}
		if = {
			limit = {
				is_Middle_East = yes
				is_major = no
			}
			every_country = {
				limit = { is_Middle_East = yes }
				news_event = {  days = 1 id = News_MD4_election.2 } 
			}
		}
		if = {
			limit = {
				is_african_nation = yes
				is_major = no
			}
			every_country = {
				limit = { is_african_nation = yes }
				news_event = {  days = 1 id = News_MD4_election.2 } 
			}
		}
		if = {
			limit = {
				 is_european_nation = yes
				is_major = no
			}
			every_country = {
				limit = { is_european_nation = yes }
				news_event = {  days = 1 id = News_MD4_election.2 } 
			}
		}
		if = {
			limit = {
				is_asian_nation = yes
				is_major = no
			}
			every_country = {
				limit = { is_asian_nation = yes }
				news_event = {  days = 1 id = News_MD4_election.2 } 
			}
		}
		if = {
			limit = {
				is_oceania_nation = yes
				is_major = no
			}
			every_country = {
				limit = { is_oceania_nation = yes }
				news_event = {  days = 1 id = News_MD4_election.2 } 
			}
		}
		if = {
			limit = {
				is_major = yes
			}
			every_country = {
				news_event = {  days = 1 id = News_MD4_election.2 } 
			}
		}
		
	}
}

news_event = {
	
	id = News_MD4_election.0
	title = News_MD4_election.0.t
	desc = News_MD4_election.0.d
	picture = GFX_news_election_rally
	
	#major = yes
	is_triggered_only = yes
	
	option = {
		name = News_MD4_election.0.a
	}
}

news_event = {
	
	id = News_MD4_election.1
	title = News_MD4_election.1.t
	desc = News_MD4_election.1.d
	picture = GFX_news_election_rally
	
	#major = yes
	is_triggered_only = yes
	
	trigger = {	
	}
	
	option = {
		name = News_MD4_election.1.a
	}
}

news_event = {
	
	id = News_MD4_election.2
	title = News_MD4_election.2.t
	desc = News_MD4_election.2.d
	picture = GFX_news_election_rally
	
	#major = yes
	is_triggered_only = yes
	
	trigger = {
	}

	option = {
		name = News_MD4_election.2.a
	}
}

news_event = {
	
	id = News_MD4_election.3
	title = News_MD4_election.3.t
	desc = News_MD4_election.3.d
	picture = GFX_news_election_rally
	
	#major = yes
	is_triggered_only = yes
	
	trigger = {
	}
	
	option = {
		name = News_MD4_election.3.a
	}
}

# TODO
# Reset Internal factions on government change
# Add happyness to certain internal factions on certain ideology taking over (make it an on_action)?
# Add pre-election events
#
#
